!function(){function e(){a.timer=requestAnimationFrame(e),t(),TWEEN.update()}function t(){if(++b%4!=0){if(!0===R){R=!1;for(var e=0;e<f.length;e++)f[e]&&f[e].start();for(var t=0;t<x.length;t++)x[t]&&x[t].start();for(var n=0;n<y.length;n++)y[n]&&y[n].start()}if(!0===z){var i=3e11,o=.001*Date.now(),r=[];if(!0===a.isKick){if(i=15e10,!0===M){T[0].start();for(var d=0;d<a.scene.children.length;d++)"text"!==a.scene.children[d].name&&(a.scene.children[d].material.color=new THREE.Color("#dfe4e2"))}}else for(var h=0;h<a.scene.children.length;h++)"text"!==a.scene.children[h].name&&(a.scene.children[h].material.color=new THREE.Color("#dfe4e2"));!0===W&&(N+=.75*Math.cos(Math.PI/180),l.position.x+=-(s+l.position.x)/18,l.position.y+=(c-l.position.y)/13,0!==c&&c>-90&&c<90&&s>-90&&s<90&&(i=15e10)),a.scene.rotation.z-=o/i;for(var E=0;E<a.scene.children.length;E++)if("text"!==a.scene.children[E].name){for(var u=0;u<a.scene.children[E].geometry.attributes.position.array.length;u+=3){var m=a.scene.children[E].geometry.attributes.position.array;r[u+0]=m[u+0]+Math.cos(o)/3.2,r[u+1]=m[u+1]+Math.sin(o)/3.2,r[u+2]=m[u+2]-(Math.cos(o)*Math.random()+.5*E),r[u+2]<-800&&(r[u+2]=80*Math.random())}a.scene.children[E].geometry.attributes.position.array.set(r),a.scene.children[E].geometry.attributes.position.needsUpdate=!0}}w.render(a.scene,l)}}function n(){d=window.innerWidth/2,h=window.innerHeight/2,l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight)}function i(e){s=e.clientX-d,c=e.clientY-h}var a=this,o=window.innerWidth,r=window.innerHeight,s=0,c=0,d=window.innerWidth/2,h=window.innerHeight/2,l=void 0,w=void 0,E=[],u=[],m=1500,g=$("#js-mainvisual__datas"),p=[],v=[{scale:.8,opacity:1},{scale:1,opacity:1},{scale:1.3,opacity:1},{scale:1.6,opacity:1},{scale:1.9,opacity:1},{scale:2.5,opacity:1},{scale:3,opacity:1}],x=[],f=[],y=[],T=[],H=[],R=(g.data("bacter"),g.data("geometry"),!1),z=!1,M=!1,W=!1,A=document.getElementById("js-mainvisual__mv2");l=new THREE.PerspectiveCamera(80,o/r,1,3e3),l.position.z=m,a.scene=new THREE.Scene,w=new THREE.WebGLRenderer({antialias:!0,alpha:!0});var C=new THREE.SpotLight(5e6);C.distance=1500,C.name="text",a.scene.add(C),w.setPixelRatio(window.devicePixelRatio),w.setSize(o,r),w.autoClear=!1,w.setClearColor(0,0),A.appendChild(w.domElement),document.addEventListener("mousemove",i,!1),window.addEventListener("resize",n,!1),!/android/gi.test(window.navigator.userAgent)&&function(){var t=new Image;t.src=g.data("geometry"),t.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;var n=t.getContext("2d");n.drawImage(this,0,0);var i=t.width,o=t.height,r=n.getImageData(0,0,i,o).data,s=0,c=0;H.hex=[],p.hex=[],E.hex=new THREE.BufferGeometry;for(var d=0;d<i;d++)for(var h=0;h<o;h++){var w=r[s],x=r[s+1],f=r[s+2],y=(r[s+3],w+x+f);if(y>1){var R=new THREE.Vector3;R.x=5*(d-i/2),R.y=-5*(h-o/2),R.z=-480*Math.random();var A=R.clone(),C=R.clone();H.push(R.x,R.y,R.z),H.push(A.x,A.y,A.z),H.push(C.x,C.y,C.z),c+=1,p.hex[c]={vertex:R.clone()}}s=4*d+h*(4*i)}var b=new Float32Array(H);E.hex.addAttribute("position",new THREE.BufferAttribute(b,3)),u.hex=[];for(var N=0;N<v.length;N++){var I=v[N],P=new THREE.PointsMaterial({color:"#e0e1e1",opacity:.6,size:2,map:THREE.ImageUtils.loadTexture(g.data("texture")),transparent:!0});u.hex[N]=new THREE.Points(E.hex,P),u.hex[N].scale.x=u.hex[N].scale.y=I.scale,u.hex[N].rotation.y=-u.hex[N].rotation.y,u.hex[N].updateMatrix(),u.hex[N].name="hex"+c,a.scene.add(u.hex[N])}e(),$(window).trigger("glReady"),setTimeout(function(){z=!0,W=!0,!0===window.isHash?(TweenMax.set("#js-mainvisual",{autoAlpha:0}),window.isHash=!1):TweenMax.fromTo("#js-mainvisual",3,{autoAlpha:0,z:0},{autoAlpha:1,z:0,delay:1,onStart:function(){},onComplete:function(){M=!0}}),T[0]=new TWEEN.Tween(l.position).to({z:m-300},200).easing(TWEEN.Easing.Quintic.In),T[1]=new TWEEN.Tween(l.position).to({z:m},200).easing(TWEEN.Easing.Quintic.Out),T[0].chain(T[1]),T[2]=new TWEEN.Tween(l.rotation).to({z:3600},100).onUpdate(function(){l.lookAt(new THREE.Vector3(0,0,0))}).easing(TWEEN.Easing.Linear.None)},1800)}}();var b=0,N=0}();