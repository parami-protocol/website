function switchLang4PwdInit(e){switchLang(e),$("input[name=email]").attr("placeholder",$.i18n("email_placeholder")),$("input[name=phoneNum]").attr("placeholder",$.i18n("placeholder_phonenum")),$("input[name=activecode]").attr("placeholder",$.i18n("placeholder_activecode")),$("input[name=passWord]").attr("placeholder",$.i18n("new_pwd_placeholder")),$("input[name=password2]").attr("placeholder",$.i18n("placeholder_password2"))}function bindEmailEvent(){$("input[name=email]").on("blur",function(e){var n=$(this),t=checkEmail(n.val());t?n.siblings(".with-errors").text(t):n.siblings(".with-errors").text("")}),$(".btn-send-email").on("click",function(e){var n=$(this);e.preventDefault();var t=checkEmail($("input[name=email]").val());if(console.log("err: ",t),t)return void $("input[name=email]").siblings(".with-errors").text(t);$("input[name=email]").siblings(".with-errors").text("");var o=n.text();countDown({el:n,duration:60,cb:function(){n.text(o)}});$("input[name=email]").siblings(".with-errors").text("verification code has sended, please check it!"),sendEmail({url:FORGET_PASSOWRD_RESET_Mail,pram:$("#forget_email").serializeJSON()})}),$("input[name=activecode]").on("blur",function(e){var n=$(this),t=checkVerfyCode(n.val());t?n.siblings(".with-errors").text(t):n.siblings(".with-errors").text("")}),$("#forget_email").find("input[name=passWord]").on("blur",function(e){checkPass($("#forget_email").find("input[name=passWord]"),$("#forget_email").find("input[name=password2]"))}),$("#forget_email").find("input[name=password2]").on("blur",function(e){checkPass($("#forget_email").find("input[name=passWord]"),$("#forget_email").find("input[name=password2]"))}),$(".btn-retrieve-pass").on("click",function(e){e.preventDefault();$(this);$.each($("#forget_email").find("input"),function(e,n){$(n).trigger("blur")});var n="";if($.each($("#forget_email").find(".with-errors"),function(e,t){""!==$(t).text()&&(n+=$(t).text())}),n)return console.log(n),$("#popUpModal").find(".modal-body").empty().text("please check your input!"),void $("#popUpModal").modal({show:!0});console.log(JSON.stringify($("#forget_email").serializeJSON()));var t=$("#forget_email").serializeJSON();t.account=t.email,$.ajax({url:FORGET_PASSOWRD_RESET_URL,method:"get",data:t,contentType:"application/json"}).done(function(e,n,t){console.log("result: ",e),console.log("status: ",n),console.log("status: ",n),e.success?window.location.href=LOGIN_PAGE:alert(e.message)}).fail(function(e,n,t){$(".alert").html(e.responseText),$(".alert").removeClass("hidden")})})}function bindPhoneEvent(){$("input[name=phoneNum]").on("blur",function(e){var n=$(this),t=checkPhone(n.val());t?n.siblings(".with-errors").text(t):n.siblings(".with-errors").text("")}),$(".btn-send-phone").on("click",function(e){console.log("send-phone");var n=$(this);e.preventDefault();var t=checkPhone($("input[name=phoneNum]").val());if(console.log("err: ",t),t)return void $("input[name=phoneNum]").siblings(".with-errors").text(t);$("input[name=phoneNum]").siblings(".with-errors").text("");var o=n.text();countDown({el:n,duration:60,cb:function(){n.text(o)}});$("input[name=phoneNum]").siblings(".with-errors").text("verification code has sended, please check it!"),sendEmail({url:FORGET_PASSOWRD_RESET_SMS,pram:$("#forget_phone").serializeJSON()})}),$("#forget_phone").find("input[name=passWord]").on("blur",function(e){checkPass($("#forget_phone").find("input[name=passWord]"),$("#forget_phone").find("input[name=password2]"))}),$("#forget_phone").find("input[name=password2]").on("blur",function(e){checkPass($("#forget_phone").find("input[name=passWord]"),$("#forget_phone").find("input[name=password2]"))}),$(".btn-retrieve-phone").on("click",function(e){e.preventDefault();$(this);$.each($("#forget_phone").find("input"),function(e,n){$(n).trigger("blur")});var n="";if($.each($("#forget_phone").find(".with-errors"),function(e,t){""!==$(t).text()&&(n+=$(t).text())}),n)return console.log(n),$("#popUpModal").find(".modal-body").empty().text("please check your input!"),void $("#popUpModal").modal({show:!0});var t=$("#forget_phone").serializeJSON();t.account=t.phoneNum,$.ajax({url:FORGET_PASSOWRD_RESET_URL,method:"get",data:t,contentType:"application/json"}).done(function(e,n,t){console.log("result: ",e),console.log("status: ",n),console.log("status: ",n),e.success?window.location.href=LOGIN_PAGE:alert(e.message)}).fail(function(e,n,t){$(".alert").html(e.responseText),$(".alert").removeClass("hidden")})})}$(document).ready(function(){$.i18n({locale:"en"}).load({en:"/i18n/en.json",zh:"/i18n/zh.json"}).then(function(){switchLang4PwdInit(1)});var e=COUNTRY_MAP.map(function(e){return'<option value="'+e.langKey+'">'+e.value+"</option>"}).join("");$("select[name=langKey]").html(e);var n=COUNTRY_MAP.map(function(e){return'<option value="'+e.areaCode+'">'+e.value+"</option>"}).join("");$("select[name=areaCode]").html(n),bindEmailEvent(),bindPhoneEvent(),$(".find_by_phone").on("click",function(e){e.preventDefault(),$("#forget_email, #forget_phone").toggleClass("hidden"),"forget_by_phone"===$.trim($(this).attr("data-i18n"))?($(this).attr("data-i18n","forget_by_email"),$(this).text($.i18n("forget_by_email"))):($(this).attr("data-i18n","forget_by_phone"),$(this).text($.i18n("forget_by_phone")))})});