define(["lodash","coreUtilsLib","imageClientLib"],function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=81)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function i(e){this.migrationMap=e}var o=n(0),r=n(1);i.prototype.getComponentData=function(e,t){return t.dataQuery&&e.data.document_data[t.dataQuery.replace("#","")]},i.prototype.setComponentData=function(e,t,n,i){var a=t.dataQuery||o.get(i,[t.id,"dataQuery"])||r.guidUtils.getUniqueId("dataItem","-");a=a.replace("#",""),t.dataQuery="#"+a,n.id=a,e.data.document_data[a]=n,o.set(i,[t.id,"dataQuery"],a)},i.prototype.deleteComponentData=function(e,t){var n=t.dataQuery&&t.dataQuery.replace("#","");n&&e.data.document_data[n]&&delete e.data.document_data[n]},i.prototype.getComponentDesignData=function(e,t){return t.designQuery&&e.data.design_data[t.designQuery.replace("#","")]},i.prototype.deleteComponentDesignData=function(e,t){var n=t.designQuery&&t.designQuery.replace("#","");n&&e.data.design_data[n]&&delete e.data.design_data[n]},i.prototype.getComponentProperties=function(e,t){return t.propertyQuery&&e.data.component_properties[t.propertyQuery.replace("#","")]},i.prototype.deleteComponentProperties=function(e,t){var n=t.propertyQuery&&t.propertyQuery.replace("#","");n&&e.data.component_properties[n]&&delete e.data.component_properties[n],t.propertyQuery&&delete t.propertyQuery},i.prototype.setComponentDesignData=function(e,t,n,i){var a=t.designQuery||o.get(i,[t.id,"designQuery"])||r.guidUtils.getUniqueId("dataItem","-");if(a=a.replace("#",""),t.designQuery="#"+a,n.id=a,o.isObject(n.background)){var s=o.clone(n.background);s.id=(s.id||r.guidUtils.getUniqueId("dataItem","-")).replace("#",""),n.background="#"+s.id,e.data.design_data[s.id]=s}e.data.design_data[a]=n,o.set(i,[t.id,"designQuery"],t.designQuery)},i.prototype.setComponentProperties=function(e,t,n,i){var a=t.propertyQuery||o.get(i,[t.id,"propertyQuery"])||r.guidUtils.getUniqueId("propItem","-");a=a.replace("#",""),t.propertyQuery=a,n.id=a,e.data.component_properties[a]=n,o.set(i,[t.id,"propertyQuery"],a)},i.prototype.migrateComps=function(e,t,n,i){var r=this;o.forEach(i,function(i){r.migrationMap[i.componentType]&&r.migrationMap[i.componentType].call(r,e,t,n,i),r.migrateComps(e,t,n,i.components)})},i.prototype.migratePage=function(e){var t=e.structure;if(t){var n={},i=t.components||t.children,o=t.mobileComponents;i&&this.migrateComps(e,n,!1,i),o&&this.migrateComps(e,n,!0,o)}},e.exports=i},function(e,t,n){"use strict";function i(e){return(e||"").toLowerCase().trim()}var o=n(4),r=o.fittingTypes,a=o.alignTypes,s={"repeat-x":r.TILE_HORIZONTAL,"repeat no_repeat":r.TILE_HORIZONTAL,"repeat no-repeat":r.TILE_HORIZONTAL,"repeat-y":r.TILE_VERTICAL,"no_repeat repeat":r.TILE_VERTICAL,"no-repeat repeat":r.TILE_VERTICAL,repeat:r.TILE,"repeat repeat":r.TILE,"":""};Object.freeze(s);var c={auto:function(e){return e||r.LEGACY_ORIGINAL_SIZE},cover:function(){return r.SCALE_TO_FILL},contain:function(e){return e?r.FIT_AND_TILE:r.SCALE_TO_FIT},"":function(){return r.SCALE_TO_FILL}};Object.freeze(c);var u={"center center":a.CENTER,center:a.CENTER,"50% 50%":a.CENTER,"top center":a.TOP,"center top":a.TOP,"50% 0%":a.TOP,"bottom center":a.BOTTOM,"center bottom":a.BOTTOM,"50% 100%":a.BOTTOM,"center right":a.RIGHT,"right center":a.RIGHT,"100% 50%":a.RIGHT,"center left":a.LEFT,"left center":a.LEFT,"0% 50%":a.LEFT,"left top":a.TOP_LEFT,"top left":a.TOP_LEFT,"0% 0%":a.TOP_LEFT,"right top":a.TOP_RIGHT,"top right":a.TOP_RIGHT,"100% 0%":a.TOP_RIGHT,"left bottom":a.BOTTOM_LEFT,"bottom left":a.BOTTOM_LEFT,"0% 100%":a.BOTTOM_LEFT,"right bottom":a.BOTTOM_RIGHT,"bottom right":a.BOTTOM_RIGHT,"100% 100%":a.BOTTOM_RIGHT,"":a.CENTER};Object.freeze(u);var p,d=((p={})[r.LEGACY_STRIP_TILE_HORIZONTAL]="repeat-x",p[r.TILE_HORIZONTAL]="repeat-x",p[r.LEGACY_STRIP_TILE_VERTICAL]="repeat-y",p[r.TILE_VERTICAL]="repeat-y",p[r.LEGACY_STRIP_TILE]="repeat",p[r.TILE]="repeat",p[r.FIT_AND_TILE]="repeat",p[""]="no-repeat",p);Object.freeze(d);var m=function(){var e={};return e[r.LEGACY_ORIGINAL_SIZE]="auto",e[r.LEGACY_STRIP_ORIGINAL_SIZE]="auto",e[r.SCALE_TO_FILL]="cover",e[r.LEGACY_STRIP_SCALE_TO_FILL]="cover",e[r.SCALE_TO_FIT]="contain",e[r.LEGACY_STRIP_SCALE_TO_FIT]="contain",e[r.FIT_AND_TILE]="contain",e[r.LEGACY_STRIP_FIT_AND_TILE]="contain",e[""]="auto",e}();Object.freeze(m);var l=function(){var e={};return e[a.TOP]="center top",e[a.CENTER]="center",e[a.BOTTOM]="center bottom",e[a.TOP_LEFT]="left top",e[a.LEFT]="left center",e[a.BOTTOM_LEFT]="left bottom",e[a.TOP_RIGHT]="right top",e[a.RIGHT]="right center",e[a.BOTTOM_RIGHT]="right bottom",e[""]="center",e}();Object.freeze(l),e.exports={cssToFittingType:function(e){var t=i(e.bgRepeat),n=i(e.bgSize),o=s[t];return c[n]&&c[n](o)},cssToAlignType:function(e){return e=i(e),u[e]},fittingTypeToBgRepeat:function(e){return d[e]||d[""]},fittingTypeToBgSize:function(e){return m[e]||m[""]},alignTypeToBgPosition:function(e){return l[e]||l[""]},migrateToLegacyFittings:function(e){return e===r.TILE?r.LEGACY_STRIP_TILE:e===r.TILE_HORIZONTAL?r.LEGACY_STRIP_TILE_HORIZONTAL:e===r.TILE_VERTICAL?r.LEGACY_STRIP_TILE_VERTICAL:e===r.SCALE_TO_FILL?r.LEGACY_STRIP_SCALE_TO_FILL:e===r.SCALE_TO_FIT?r.LEGACY_STRIP_SCALE_TO_FIT:e===r.FIT_AND_TILE?r.LEGACY_STRIP_FIT_AND_TILE:e===r.LEGACY_ORIGINAL_SIZE?r.LEGACY_STRIP_ORIGINAL_SIZE:e}}},function(e,t){e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.layout&&e.layout.y+e.layout.height}function o(e){return e.layout&&e.layout.anchors||[]}function r(e){return e.type===s.BOTTOM_BOTTOM||e.type===s.BOTTOM_TOP}var a=n(0),s={BOTTOM_BOTTOM:"BOTTOM_BOTTOM",BOTTOM_TOP:"BOTTOM_TOP"};e.exports={fixBottomTopBottomBottomCycles:function e(t){if(!a.isEmpty(t)){var n=a.keyBy(t,"id");a.forEach(t,function(t){var c=o(t);a.remove(c,function(e){return r(e)&&function(e,t,n){var o=void 0;switch(e.type){case s.BOTTOM_BOTTOM:o=i(n);break;case s.BOTTOM_TOP:o=a.get(n,"layout.y");break;default:return!1}return!a.isUndefined(o)&&o-i(t)<0}(e,t,n[e.targetComponent])&&function e(t,n,i,s){if(s[n.id])return!1;s[n.id]=!0;var c=o(n);return c=a.filter(c,r),a.some(c,function(n){return n.targetComponent===t.id||e(t,i[n.targetComponent],i,s)})}(t,n[e.targetComponent],n,{})}),e(t.components)})}}}},function(e,t,n){"use strict";var i=n(1);e.exports={createBehaviorsDataItem:function(e){return{id:i.guidUtils.getUniqueId("behavior","-"),type:"ObsoleteBehaviorsList",items:e}}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r=n(80),a=n(78),s=n(77),c=n(75),u=n(73),p=n(72),d=n(71),m=n(70),l=n(69),y=n(68),f=n(67),g=n(65),w=n(64),v=n(63),T=n(62),h=n(61),k=n(60),S=n(59),I=n(58),_=n(57),E=n(56),M=n(55),b=n(54),P=n(53),C=n(52),x=n(51),A=n(50),O=n(49),B=n(48),N=n(47),L=n(46),D=n(45),R=n(44),U=n(43),F=n(42),G=n(41),Q=n(40),H=n(39),V=n(38),z=n(37),W=n(36),q=n(35),Y=n(34),j=n(33),Z=n(32),J=n(31),K=n(30),X=n(29),$=n(28),ee=n(27),te=n(26),ne=n(25),ie=n(24),oe=n(23),re=n(22),ae=n(21),se=n(20),ce=n(19),ue=n(18),pe=n(17),de=n(16),me=n(15),le=n(14),ye=n(13),fe=n(12),ge=n(11),we=n(10),ve=i.compact([we,r,s,C,x,A,q,c,u,p,d,m,l,y,f,g,oe,w,v,T,h,k,S,I,a,_,E,M,b,P,$,O,B,N,L,D,R,U,G,Q,H,F,V,z,W,q,Y,j,Z,J,K,X,ee,ne,te,ie,re,ae,se,ce,ue,pe,de,me,le,ye,fe,ge]);Object.freeze(ve),e.exports=function(e){var t=e.pageJson,n=e.urlFormatModel,r=e.isViewerMode,a=e.clientSpecMap,s=e.quickActionsMenuEnabled,c=e.experiments,u=e.pageIdsArray,p={};p.isSlash=i.matchesProperty("format",o.siteConstants.URL_FORMATS.SLASH)(n),p.pageIdToResolvedUriSEO=i.get(n,"pageIdToResolvedUriSEO",{}),p.clientSpecMap=a,p.quickActionsMenuEnabled=s,p.isExperimentOpen=function(e){return i.includes(c,e)},p.isViewerMode=r;var d=t.data||{};return d.document_data=d.document_data||{},d.theme_data=d.theme_data||{},d.component_properties=d.component_properties||{},d.mobile_hints=d.mobile_hints||{},t.data=d,i.forEach(ve,function(e){e.exec(t,u,null,null,null,null,null,p)}),t}},function(e,t,n){"use strict";function i(e){var t="";for(e=e||[];s.includes(e,t);)t=s.random(0,99999).toString(36).replace(" ","_");return t}function o(e){var t=s.compact(e.split(" "));return r.apply(this,t)}function r(e,t,n,i,o,r,a,s,c,d,m,l){var y=u.cssToAlignType(i+" "+o),f=u.cssToFittingType({bgRepeat:a+" "+s,bgSize:r});return f=function(e){var t={};return t[p.fittingTypes.TILE]=p.fittingTypes.LEGACY_BG_FIT_AND_TILE,t[p.fittingTypes.TILE_HORIZONTAL]=p.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL,t[p.fittingTypes.TILE_VERTICAL]=p.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL,t[p.fittingTypes.ORIGINAL_SIZE]=p.fittingTypes.LEGACY_BG_NORMAL,t[e]||e}(f),m=m||{},d&&"none"!==d||(d="rgba(0,0,0,0)"),{type:"BackgroundMediaUnified",alignType:y,fittingType:f,attachment:c,imageWidth:Number(t),imageHeight:Number(n),mediaType:"image",uri:e,color:d,metaData:{isHidden:m.isHidden||!1,isPreset:m.isPreset||!1,schemaVersion:2},id:l}}function a(e){var t=[e.url,e.imagesizew,e.imagesizeh,e.positionx,e.positiony,e.width,e.repeatx,e.repeaty,e.attachment,e.color,e.metaData,e.id];return r.apply(this,t)}var s=n(0),c=n(1),u=n(3),p=c.imageClientApi;e.exports={fixBackgroundData:function(e){var t=e.getPageDataMap(e.MASTER_PAGE_ID,e.dataTypes.THEME),n=e.getPageDataMap(e.MASTER_PAGE_ID,e.dataTypes.DATA),r=s(n).filter({type:"BackgroundImage"}).map("id").value();(function(e){var t=s.find(e,{type:"Page"});return e[t.id].pageBackgrounds&&"BackgroundMediaUnified"===e[t.id].pageBackgrounds.type})(n)||(function(e){return!e[s.find(e,{type:"Page"}).id].pageBackgrounds}(n)?function(e,t){var n=s(t).filter({type:"Page"}).map("id").value(),r=e.THEME_DATA.siteBg||"none 0 0 center center auto repeat repeat scroll none",a=("[siteBg]"===e.THEME_DATA.mobileBg?e.THEME_DATA.siteBg:e.THEME_DATA.mobileBg)||"none 0 0 center center auto repeat repeat scroll none",c=o(r),u=o(a);c.id="customBgImg"+i(),u.id="customBgImg"+i([c.id]),t[c.id]=c,t[u.id]=u,s.forEach(n,function(e){t[e].pageBackgrounds={desktop:{custom:!0,isPreset:!1,ref:"#"+c.id},mobile:{custom:!0,isPreset:!1,ref:"#"+u.id}}})}(t,n):s.forEach(r,function(e){a(n[e])}))},migrateBgDataItem:a,migrateBgString:o}},function(e,t,n){"use strict";function i(e){switch(e){case"wysiwyg.viewer.components.WSiteStructure":return"Document";case"mobile.core.components.Page":return"Page";case"wixapps.integration.components.Area":case"mobile.core.components.Container":case"wysiwyg.viewer.components.HeaderContainer":case"wysiwyg.viewer.components.FooterContainer":case"wysiwyg.viewer.components.PagesContainer":case"wysiwyg.viewer.components.ScreenWidthContainer":case"wysiwyg.viewer.components.StripContainer":return"Container"}return"Component"}function o(e){return parseInt(e||0,10)}var r=n(0),a=n(1),s=n(7);e.exports=function(e){e.pagesData={};var t=r.get(e,"wixData.document_data.SITE_STRUCTURE.mainPage")||r.get(e,"wixData.document_data.masterPage.mainPage"),n=t&&t.slice(1);e.pagesData.masterPage={data:e.wixData},e.pagesData.masterPage.structure={};var c={page:"masterPage",childrenIndex:{}};a.htmlParser(e.wixHtmlRaw,{start:function(e,t,n,a,s){var c=r(a).map("name").invokeMap("toLowerCase").zipObject(r.map(a,"value")).value();"Page"===i(c.comp)&&(t.page=c.id),e.pagesData[t.page]=e.pagesData[t.page]||{structure:{},data:{},theme_data:{}};var u=e.pagesData[t.page].structure=e.pagesData[t.page].structure||{};if(r.has(t.childrenIndex,t.page)){for(var p=0;p<t.childrenIndex[t.page].length;p++)u=u.components[t.childrenIndex[t.page][p]];var d={};t.childrenIndex[t.page].push(u.components.length),u.components.push(d),u=d}else t.childrenIndex[t.page]=[];u.componentType=c.comp,u.type=i(c.comp),u.id=c.id,u.components=[],u.skin=c.skin,u.styleId=c.styleid,c.dataquery&&(u.dataQuery=c.dataquery),u.propertyQuery=c.propertyquery,u.layout={width:o(c.width),height:o(c.height),x:o(c.x),y:o(c.y),anchors:e.wixAnchors[c.id]||[]}}.bind(void 0,e,c),end:function(e,t,n){0===t.childrenIndex[t.page].length?t.page="masterPage":t.childrenIndex[t.page].pop()}.bind(void 0,e,c)});var u=r.keys(e.pagesData),p=r.without(u,"masterPage");e.pagesData.masterPage.data.document_data.MAIN_MENU=e.pagesData.masterPage.data.document_data.MAIN_MENU||{items:[],type:"Menu",id:"MAIN_MENU",metaData:{}},r.forEach(u,function(t){e.pagesData[t]=s(e.pagesData[t],p,e.requestModel,e.currentUrl,e.urlFormatModel)}),e.publicModel.pageList={mainPageId:n,pages:r.map(p,function(t){return r.chain(e).get(["pagesData","masterPage","data","document_data",t]).pick(["title","pageUriSEO"]).assign({pageId:t}).value()})}}},function(e,t,n){"use strict";var i=n(0),o=function(e){return function(t){return"144f04b9-aab4-fde7-179b-780c11da4f46"===i.get(e,["data","document_data",function(e){return i.get(e,["dataQuery"],"").replace("#","")}(t),"widgetId"])}},r=function(e){return i.set(e,["layout","width"],320)};e.exports={exec:function(e){var t=i.get(e,["structure","mobileComponents"]);i(t).filter({componentType:"wysiwyg.viewer.components.tpapps.TPAMultiSection"}).filter(o(e)).forEach(r)}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r=function(e){return"wysiwyg.viewer.components.HoverBox"===e.componentType};e.exports={exec:function(e){var t=o.dataUtils.getAllCompsInStructure(e.structure,!1,r),n=o.dataUtils.getAllCompsInStructure(e.structure,!0,r);i.forEach(t,function(t,o){var r=n[o];if(r){var a=i.get(r,["propertyQuery"]),s=i.get(e,["data","component_properties",a,"mobileDisplayedModeId"]),c=i.findIndex(i.get(r,["modes","definitions"]),{modeId:s});i.set(r,["modes","definitions"],i.get(t,["modes","definitions"]));var u=i.get(t,["modes","definitions",c,"modeId"]);i.set(e,["data","component_properties",a,"mobileDisplayedModeId"],u)}})}}},function(e,t,n){"use strict";function i(e,t,n,i){if(!i.designQuery&&!n){i.layout.width=980;var o={type:"MediaContainerDesignData",id:r.guidUtils.getUniqueId("dataItem","-"),background:{id:r.guidUtils.getUniqueId("dataItem","-"),type:"BackgroundMedia",mediaRef:null,alignType:"center",fittingType:"fill",colorOpacity:0,colorOverlay:"",colorOverlayOpacity:1,imageOverlay:"",scrollType:"none",color:"#FFFFFF"}};this.setComponentDesignData(e,i,o,t)}}var o=n(2),r=n(1),a=new o({"wysiwyg.viewer.components.StripColumnsContainer":i,"wysiwyg.viewer.components.Column":i});e.exports={exec:a.migratePage.bind(a)}},function(e,t,n){"use strict";var i=n(0),o=new(n(2))({"wysiwyg.viewer.components.Column":function(e,t,n,o){n&&i.startsWith(o.designQuery,"#mobile_")&&(this.deleteComponentDesignData(e,o),o.designQuery=i.replace(o.designQuery,"mobile_",""))}});e.exports={exec:o.migratePage.bind(o)}},function(e,t,n){"use strict";function i(e,t,n,i){var r=e.data.document_data[i.dataQuery.slice(1)],a=e.data.component_properties,s=a[i.propertyQuery];if(o.has(s,"dataSource")){var c={type:s.dataSource.type,revision:s.dataSource.id};delete s.dataSource;var u="mobile_"+i.propertyQuery;o.has(a,u)&&delete a[u].dataSource,o.set(r,"dataSource",c)}}var o=n(0),r=n(2);e.exports={exec:function(e){new r({"wysiwyg.viewer.components.Grid":i}).migratePage(e)}}},function(e,t,n){"use strict";function i(e,t,n,i,r){var c=function(e){return o(e).filter("appFields.platform").reduce(function(e,t){return o(t.widgets).pickBy(["componentFields.semiNative",!0]).mapValues(o.constant(!0)).assign(e).value()},{})}(e),u=this.getComponentData(t,r);r.componentType===s&&c[u.widgetId]&&(r.componentType="platform.components.semiNativeComponent",r.skin="wysiwyg.viewer.skins.semiNativeComponentSkin",r.styleId+=a,this.setComponentData(t,r,o.defaults({type:"SemiNative"},u),n))}var o=n(0),r=n(2),a="-semi",s="wysiwyg.viewer.components.tpapps.TPAWidget";e.exports={exec:function(e,t,n,s,c,u,p,d){if(d.isExperimentOpen("sv_migrateTpaToSemiNative")&&d.isViewerMode){"masterPage"===e.structure.id&&function(e){var t=o(e.data.theme_data).filter({componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}).map(function(e){var t=o.cloneDeep(e);return t.componentClassName="platform.components.semiNativeComponent",t.skin="wysiwyg.viewer.skins.semiNativeComponentSkin",t}).transform(function(e,t){e[t.id+a]=t},{}).value();o.assign(e.data.theme_data,t)}(e);var m={"wysiwyg.viewer.components.tpapps.TPAWidget":o.partial(i,d.clientSpecMap)};new r(m).migratePage(e)}}}},function(e,t,n){"use strict";function i(e){o.forEach(e,function(e){var t=a[e.componentType];t&&c(e,t),e.components&&i(e.components)})}var o=n(0),r=n(1).vectorImageConversionUtils,a={"wysiwyg.viewer.components.VectorImageArt":r.vectorImageDefaults,"wysiwyg.viewer.components.VectorImageShape":r.vectorImageDefaults},s=r.convertStyle,c=r.convertStructure;e.exports={exec:function(e){var t=e.data.theme_data,n=e.structure.components||e.structure.children,r=e.structure.mobileComponents;o.isEmpty(t)||function(e){o.forEach(e,function(e){var t=a[e.componentClassName];t&&s(e,t)})}(t),o.isEmpty(n)||i(n),o.isEmpty(r)||i(r)}}},function(e,t,n){"use strict";function i(e,t,n,o){s.forEach(e,function(e){if(e.components)e.componentType===d&&(function(e,t,n){var o=t[s.get(e,"dataQuery","").replace("#","")];i(e.components,t,n,s.get(o,"items"))}(e,t,n),o=[]),i(e.components,t,n,o);else{var r=p[e.componentType];if(r){var a=e.skin,c=s.get(e,"propertyQuery","").replace("#",""),u=s.get(e,"dataQuery","").replace("#","");n[c]||(n[c]={});var m=t[u],g=n[c];f(e,r),l(m,r,a),y(g,r),s.forEach(s.get(e,["modes","overrides"]),function(e){if(e.propertyQuery){var t=s.get(e,"propertyQuery","").replace("#","");n[t]||(n[t]={});var i=n[t];y(i,r)}}),s.forEach(o,function(n){var i=t[s.get(e,"dataQuery","").replace("#","")+"__"+n];i&&l(i,r,a)})}}})}var o,r,a,s=n(0),c=n(1).vectorImageConversionUtils,u="wysiwyg.viewer.components.svgshape.SvgShape",p=(o={},r=u,a=c.vectorImageDefaults,r in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,o),d="wysiwyg.viewer.components.Repeater",m=c.convertStyle,l=c.convertData,y=c.convertProperties,f=c.convertStructure;e.exports={exec:function(e){var t=e.data.theme_data,n=e.data.document_data,o=e.data.component_properties,r=e.structure.components||e.structure.children,a=e.structure.mobileComponents,c=[];s.isEmpty(t)||function(e){s.forEach(e,function(e){if(s.includes(e.skin,"svgshape")&&"wysiwyg.viewer.components.PopupCloseIconButton"!==e.componentClassName){var t=p[u];m(e,t)}})}(t),s.isEmpty(r)||i(r,n,o,c),s.isEmpty(a)||i(a,n,o,c)}}},function(e,t,n){"use strict";var i=n(0),o=["wysiwyg.viewer.skins.mobile.TinyMenuSkin","wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromLeftSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromTopSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromRightSkin"];e.exports={exec:function(e){if("masterPage"===i.get(e,["structure","id"])){var t=function e(t){var n=i.find(t,{id:"TINY_MENU"});return n||(i.forEach(t,function(t){if(!i.isEmpty(t.components))return!(n=e(t.components))}),n)}(e.structure.mobileComponents);t&&!function(e,t){var n=i.get(t,[e.styleId,"skin"]),r=e.skin;return n&&r&&i.includes(o,n)&&i.includes(o,r)}(t,e.data.theme_data)&&function(e){e.skin="wysiwyg.viewer.skins.mobile.TinyMenuSkin",e.styleId="tm2"}(t)}}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){var t=e.data.component_properties;i.isEmpty(t)||function(e){i.forEach(e,function(e){"WPhotoProperties"===e.type&&e.effectName&&(e.filterEffect||"none"===e.effectName||(e.filterEffect={effectType:e.effectName}),delete e.effectName)})}(t)}}},function(e,t,n){"use strict";function i(e,t){!function(e,t){!0===function(e){if(e){var t=e.widgets[a];return o.get(t,"shouldBeStretchedByDefaultMobile")}return null}(e)&&(o.set(t.layout,"dock",s),10===t.layout.y&&(t.layout.y=0))}(t,function(e){for(var t=[].concat(o.get(e,"structure.mobileComponents"));t.length>0;){var n=t.shift();if(n&&n.componentType===r)return n;n.components&&(t=t.concat(n.components))}}(e))}var o=n(0),r="wysiwyg.viewer.components.tpapps.TPASection",a="1489040e-001f-4631-55a9-2c29b4417126",s={left:{vw:0},right:{vw:0}};e.exports={exec:function(e,t,n,r,s,c,u,p){var d=void 0,m=o.get(p,"clientSpecMap"),l=p.isExperimentOpen("sv_tpaSectionsMobileFSDataFixer"),y=function(e){var t=o.find(e,{appDefinitionId:"14724f35-6794-cd1a-0244-25fd138f9242"});return o.get(t,"applicationId")}(m);if(y&&l){var f=o.get(m,y);if("masterPage"===o.get(e,"structure.id")){var g=o.get(e,"data.document_data");(d=o.find(g,{tpaApplicationId:y}))&&function(e,t){var n=t.widgets[a];!0===o.get(n,"appPage.landingPageInMobile")&&(e.isMobileLandingPage=!0)}(d,f)}else d=o.get(e,["data","document_data"]),o.find(d,{applicationId:y.toString(),type:"TPA"})&&i(e,f)}}}},function(e,t,n){"use strict";function i(e){return"Image"===e.type}function o(e,t){return"undefined"!==t&&"null"!==t&&e.length>1}var r=n(0),a=n(1);e.exports={exec:function(e){var t=r.get(e,["data","document_data"]);t&&r(t).pickBy(i).groupBy("originalImageDataRef").pickBy(o).forOwn(function(e,n){var i=r.tail(e),o=n.replace("#","");r.forEach(i,function(e){var n=function(e,t){var n=t+"_"+a.guidUtils.getUniqueId(),i=r.cloneDeep(e[t]);return i.id=n,i}(t,o);t[n.id]=n,e.originalImageDataRef="#"+n.id})})}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r={exec:function(e){i.forEach(e.data.document_data,function(e){e.appPartName&&e.appPartName===o.blogAppPartNames.FEED&&r.fixMobileDateCustomization(e)})},fixMobileDateCustomization:function(e){i.forEach(e.appLogicCustomizations,function(e){"date"===e.fieldId&&"Mobile"===e.format&&"Post"===e.forType&&"comp.hidden"===e.key&&(e.fieldId="dateAndAuthor")})}};e.exports=r},function(e,t,n){"use strict";function i(e){return a.find(e.structure.mobileComponents,{id:"QUICK_ACTION_BAR"})}function o(e){i(e).propertyQuery="quickActionBarProps",a.assign(e.data.component_properties,{quickActionBarProps:{type:"QuickActionBarProperties",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},colorScheme:"brand",invertColors:!0,alignment:"right",hideText:!0}})}function r(e){return!!i(e)}var a=n(0);e.exports={exec:function(e,t,n,s,c,u,p,d){if("masterPage"===e.structure.id){var m,l;if(a(e.data.document_data).filter(function(e){return"QuickActionBarItem"===e.type&&a.isString(e.text)}).forEach(function(e){e.text=e.text.slice(0,40)}),r(e))return function(e){var t=a.find(e.structure.mobileComponents,{id:"QUICK_ACTION_BAR"});a.isUndefined(t.components)&&(t.components=[]),t.type="Container",a.isUndefined(e.data.component_properties[t.propertyQuery])&&o(e)}(e),void function(e){var t=a.find(e.structure.mobileComponents,{id:"QUICK_ACTION_BAR"}),n=a.get(e.data.theme_data,[t.styleId,"style","properties"]);a.transform(["controlButtonBorderColor","actionsBorderColor"],function(e,t){/^rgb/.test(e[t])&&(e[t]="#ffffff")},n)}(e);m=d.clientSpecMap,l=a.find(m,{appDefinitionId:"14517e1a-3ff0-af98-408e-2bd6953c36a2"}),!(a.isUndefined(l)||a.get(l,"permissions.revoked")||r(e)||d.quickActionsMenuEnabled)&&(function(e){e.structure.mobileComponents.push({type:"Container",id:"QUICK_ACTION_BAR",componentType:"wysiwyg.viewer.components.QuickActionBar",components:[],styleId:"quickActionBarStyle",layout:{fixedPosition:!0}})}(e),function(e){i(e).styleId="quickActionBarStyle",a.assign(e.data.theme_data,{quickActionBarStyle:{type:"TopLevelStyle",id:"quickActionBarStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},skin:"wysiwyg.viewer.skins.quickActionBar.floatingSkin",style:{properties:{"alpha-controlButtonBG":"1","alpha-controlButtonFG":"1","alpha-controlButtonBorderColor":"1","alpha-actionsBorderColor":"1","boxShadowToggleOn-actionsSHD":"true","boxShadowToggleOn-controlButtonSHD":"true",controlButtonBG:"#ffffff",controlButtonFG:"#4682b4",controlButtonBorderSize:"0",controlButtonBorderColor:"#ffffff",actionsBorderSize:"0",actionsBorderColor:"#ffffff",colorScheme:"brand inv",controlButtonSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)",actionsSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)"},propertiesSource:{controlButtonBG:"value",controlButtonFG:"value",controlButtonBorderSize:"value",controlButtonBorderColor:"value",actionsBorderSize:"value",actionsBorderColor:"value",colorScheme:"value",controlButtonSHD:"value",actionsSHD:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.QuickActionBar",pageId:"",compId:"",styleType:"custom"}})}(e),o(e))}}}},function(e,t,n){"use strict";var i=n(0),o=n(1);e.exports={exec:function(e){i(e.data.document_data).filter({type:"AppPart",appPartName:o.blogAppPartNames.SINGLE_POST}).forEach(function(e){var t=i.find(e.appLogicCustomizations,{forType:"Post",fieldId:"vars",key:"selectionSharerExperimentOpen",view:e.viewName});t||(t={forType:"Post",fieldId:"vars",key:"selectionSharerExperimentOpen",view:e.viewName,type:"AppPartCustomization",format:""},e.appLogicCustomizations.push(t))})}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){var t=i.get(e,["data","component_properties",e.structure.id]);t&&t.popup&&(i.forEach(["desktop","mobile"],function(e){var n=t[e],o=t.popup[e];(n||o)&&i.set(t,[e,["popup"]],i.assign(n||{},o||{}))}),delete t.popup)}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){return e.structure&&"Document"===e.structure.type&&i.isEmpty(e.data.document_data.masterPage.characterSets)&&(e.data.document_data.masterPage.characterSets=["latin"]),e}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){var t=e.data.document_data;i.isEmpty(t)||function(e){i.forEach(e,function(e){"LoginToWixLink"!==e.type&&"HomePageLogin"!==e.type||function(e){e.metaData&&"2.0"===e.metaData.schemaVersion||(e.sendMail=!0)}(e)})}(t)}}},function(e,t,n){"use strict";function i(e){return"wysiwyg.viewer.components.StripContainer"===e.componentType}function o(e){return!p.isUndefined(e.designQuery)}function r(e,t,n){return t[n]=e[n],delete e[n],t[n]}function a(e,t,n,i,o){var a=o.dataQuery.slice(1),s=function(e,t,n){return p.isUndefined(n)&&(n=d.guidUtils.getUniqueId("dataItem","-")),t[n]={id:n,type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},e.designQuery="#"+n,n}(o,t);n[a]=s;var c=function(e,t,n,i){var o=n[e];if(!p.isUndefined(o.background)){var a=o.background.slice(1),s=r(n,i,a);if(!p.isUndefined(s.mediaRef)){var c=r(n,i,s.mediaRef.slice(1));"WixVideo"===c.type&&r(n,i,c.posterImageRef.slice(1)),p.isUndefined(c.originalImageDataRef)||r(n,i,c.originalImageDataRef.slice(1)),p.isUndefined(c.link)||delete c.link}return p.isUndefined(s.imageOverlay)||r(n,i,s.imageOverlay.slice(1)),delete o.background,i[t].background="#"+a,a}}(a,s,e,t);p.isUndefined(c)||(i[a]=c)}function s(e,t,n,i){var o=i.dataQuery.slice(1);i.designQuery="#"+t[o]}function c(e){return p.isUndefined(e.components)?p.isUndefined(e.children)?[]:e.children:e.components}function u(e){for(var t=p.clone(e)||[],n=[];t.length>0;){var i=t.pop();n.push(i);var o=c(i);p.forEach(o,function(e){t.push(e)})}return n}var p=n(0),d=n(1);e.exports={exec:function(e){var t=function(e){return u(c(e.structure))}(e),n=function(e){return u(e.structure.mobileComponents)}(e);e.data.design_data=e.data.design_data||{},function(e,t,n,r){var c={},u={},d=p.filter(e,i);p(d).reject(o).forEach(p.partial(a,n,r,u,c)),p(t).filter(function(e){return i(e)&&!o(e)}).forEach(p.partial(s,r,u,c))}(t,n,e.data.document_data,e.data.design_data)}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){"masterPage"===i.get(e,["structure","id"])&&function e(t){var n=i.find(t,{id:"TINY_MENU"});return n?(n.layout.fixedPosition&&n.layout.x>320&&(n.layout.x=250),!0):i.some(t,function(t){return!i.isEmpty(t.components)&&e(t.components)})}(e.structure.mobileComponents)}}},function(e,t,n){"use strict";function i(e){function t(e,t,n){o.isUndefined(e)||o.isUndefined(e[t])||(e[n]=e[n]||e[t])}if(e.skin===r&&!o.isUndefined(e.style)&&!o.isUndefined(e.style.properties)){var n=e.style.properties,i=e.style.propertiesSource;o.forEach([["bg","bgDrop"],["bg","bgOpen"],["txt","bordercolor"],["txt","iconcolor"],["bordercolor","borderColorSelected"]],function(e){var o=e[0],r=e[1];t(n,o,r),t(i,o,r),t(n,o="alpha-"+o,r="alpha-"+r),t(i,o,r)})}}var o=n(0),r="wysiwyg.viewer.skins.mobile.TinyMenuSkin";e.exports={exec:function(e){var t=e.data&&e.data.theme_data;o.isEmpty(t)||o.forEach(t,i)}}},function(e,t,n){"use strict";var i=n(0),o=n(2),r=n(1),a=new o({"wysiwyg.viewer.components.StripContainer":function(e,t,n,o){o.componentType="wysiwyg.viewer.components.StripColumnsContainer",delete o.skin,o.styleId="strc1",this.setComponentProperties(e,o,{columnsMargin:0,frameMargin:0,fullWidth:!0,rowMargin:0,siteMargin:0,type:"StripColumnsContainerProperties"},t);var a=function(e,t){return{id:i.get(t,[e.id,"mediaId"],r.guidUtils.getUniqueId("media")),type:"Container",layout:{width:e.layout.width,height:e.layout.height,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:e.id}],fixedPosition:!1},components:e.components,componentType:"wysiwyg.viewer.components.Column",styleId:"strc1"}}(o,t);if(function(e,t){i.forEach(e.components,function(e){var n=i.get(e,["layout","anchors"],[]);i.forEach(n,function(e){"BOTTOM_PARENT"===e.type&&(e.targetComponent=t.id)})})}(o,a),function(e,t){e.behaviors&&(t.behaviors=i.clone(e.behaviors),delete e.behaviors),e.behaviorQuery&&(t.behaviorQuery=e.behaviorQuery,delete e.behaviorQuery)}(o,a),i.set(t,[o.id,"mediaId"],a.id),this.setComponentProperties(e,a,{type:"ColumnProperties",alignment:50},t),a.designQuery=o.designQuery,delete o.designQuery,n)o.layout.width=320,o.designQuery=i.get(t,[o.id,"designQuery"]),this.deleteComponentData(e,o);else{o.layout.width=980;var s={type:"MediaContainerDesignData",id:r.guidUtils.getUniqueId("dataItem","-"),background:{id:r.guidUtils.getUniqueId("dataItem","-"),type:"BackgroundMedia",mediaRef:null,alignType:"center",fittingType:"fill",colorOpacity:0,colorOverlay:"",colorOverlayOpacity:1,imageOverlay:"",scrollType:"none",color:"#FFFFFF"}};this.setComponentDesignData(e,o,s,t)}delete o.dataQuery,o.components=[a]}});e.exports={exec:a.migratePage.bind(a)}},function(e,t,n){"use strict";var i=n(0),o=i.matchesProperty(["structure","type"],"Page");e.exports={exec:function(e,t,n,r,a,s,c,u){i.get(u,"isSlash")&&!o(e)&&i.forEach(u.pageIdToResolvedUriSEO,function(t,n){e.data.document_data[n].pageUriSEO=t.curr})}}},function(e,t,n){"use strict";var i=n(0),o=["RichText","Text","StyledText","MediaRichText"];e.exports={exec:function(e){var t=e.data.document_data;t&&i(t).pickBy(function(e){return i.includes(o,e.type)}).mapValues(function(e){var t;return e.text=(t=e.text)&&t.replace(/(<object[^>]*>)(.*?)(<\/object>)/gi,""),e.text=function(e){return e&&e.replace(/<img[^>]*(onerror|onload|onmouseenter|onmousemove|onmouseleave|onmouseover|onmouseup|onmouseout)[^>]*\/?>(<\/img>)?/gi,"")}(e.text),e}).value()}}},function(e,t,n){"use strict";function i(e){o.forEach(e,function(e){var t;(t=e).componentType===r&&(t.skin=a),i(e.components)})}var o=n(0),r="wysiwyg.viewer.components.Group",a="wysiwyg.viewer.components.GroupSkin";e.exports={exec:function(e){var t=e.structure;if(t){var n=t.components||t.children,o=t.mobileComponents;n&&i(n),o&&i(o)}}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){(function(e){return"Page"===i.get(e,"structure.type")})(e)&&function(e){i(e.data.document_data).filter({type:"Page"}).map("id").forEach(function(t){delete e.data.document_data[t]})}(e),function(e){i.forEach(e.data.document_data,function(e){"#SITE_STRUCTURE"===e.pageId&&(e.pageId="#masterPage")})}(e)}}},function(e,t,n){"use strict";function i(e){return(e||"").replace("#","")}function o(e){var t,n=this,o=i(e.dataQuery),r=i(e.propertyQuery),y=this.pageJson.data.document_data[o],f=function(e,t,n){return!a.has(n.data.component_properties,t)&&e.componentType===m
}(e,r,this.pageJson)?s:this.pageJson.data.component_properties[r];a.unset(e,"propertyQuery"),a.set(e,"componentType",l),t=y,a.has(t,"dynamicFields")&&a.get(t,"type")===d||(a.assign(this.pageJson.data.document_data[o],{type:d,dynamicFields:function(e,t,n){var i=a.startsWith(e,u.skinPrefix)?u.fields:p.fields;return a.reduce(i,function(e,i){var o=i+"FieldLabel",r=n["hidden_"+o];if(r){var s=function(e){switch(e){case"email":return{fieldType:"email",fieldInputType:"email"};case"phone":return{fieldType:"phone",fieldInputType:"tel"};default:return{fieldType:e,fieldInputType:"text"}}}(i);e.push({name:s.fieldType,inputType:s.fieldInputType,displayLabel:t[o]||a.get(c[o],"default"),required:n["required_"+o],isDisplayed:r})}return e},[])}(e.skin,y,f)}),["name","email","subject","phone","address","message"].forEach(function(e){a.unset(n.pageJson.data.document_data,[o,e+"FieldLabel"])}),a.unset(this.pageJson.data.component_properties,r))}function r(e){var t=this;e&&a.forEach(e,function(e){e.componentType===m&&o.call(t,e),e.componentType===l&&function(e){var t=i(e.propertyQuery);a.unset(e,"propertyQuery"),a.unset(this.pageJson.data.component_properties,[t])}.call(t,e),r.call(t,e.components)})}var a=n(0),s={type:"ContactFormProperties",hidden_emailFieldLabel:!0,hidden_nameFieldLabel:!0,hidden_phoneFieldLabel:!1,hidden_addressFieldLabel:!1,hidden_subjectFieldLabel:!0,hidden_messageFieldLabel:!0,required_emailFieldLabel:!0,required_nameFieldLabel:!0,required_phoneFieldLabel:!1,required_addressFieldLabel:!1,required_subjectFieldLabel:!1,required_messageFieldLabel:!1,useCookie:!0},c={nameFieldLabel:{type:"string",default:"Name"},emailFieldLabel:{type:"string",default:"Email"},phoneFieldLabel:{type:"string",default:"Phone"},addressFieldLabel:{type:"string",default:"Address"},subjectFieldLabel:{type:"string",default:"Subject"},messageFieldLabel:{type:"string",default:"Message"},submitButtonLabel:{type:"string",default:"Send"},successMessage:{type:"string",default:"Your details were sent successfully!"},errorMessage:{type:"string",default:"Please provide a valid email"},textDirection:{type:"string",default:"left",enum:["left","right"]},validationErrorMessage:{type:"string",default:"Please fill in all required fields."},onSubmitBehavior:{type:"string",default:"message",enum:["message","link"]}},u={skinPrefix:"contactform.",fields:["name","email","subject","phone","address","message"]},p={skinPrefix:"wysiwyg.viewer.skins.contactform.",fields:["name","email","phone","address","subject","message"]},d="DynamicContactForm",m="wysiwyg.viewer.components.ContactForm",l="wysiwyg.viewer.components.DynamicContactForm";e.exports={exec:function(e,t,n,i,o,s,c,u){var p=e.structure;if(function(e,t){var n=e.isExperimentOpen;return(n("sv_contactFormTemplatesMigration")||n("sv_contactFormFinalMigration")||n("sv_contactFormFinalMigrationEditor"))&&!!t}(u,p)){var d=a.concat([],p.components||p.children,p.mobileComponents||[]);r.call({pageJson:e},d)}}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r={};r[o.blogAppPartNames.FEED]=["MediaBottomPage","MediaLeftPage","MediaRightPage","MediaTopPage","MediaZigzagPage"],r[o.blogAppPartNames.POSTS_LIST]=["PostsList","PostsListMediaLeft"],r[o.blogAppPartNames.TICKER]=["TickerMediaBottom","TickerMediaTop"],e.exports={exec:function(e){i(e.data.document_data).filter(function(e){return"AppPart"===e.type&&i.includes([o.blogAppPartNames.FEED,o.blogAppPartNames.POSTS_LIST,o.blogAppPartNames.TICKER],e.appPartName)}).forEach(function(e){i(e.appLogicCustomizations).filter(function(t){return"date"===t.fieldId&&"Post"===t.forType&&!t.format&&"comp.format"===t.key&&i.includes(r[e.appPartName],t.view)}).forEach(function(e){e.format="*"})})}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r=null;e.exports={exec:function(e){i.isNull(r)&&(r=[],i.forEach(e.data.theme_data,function(e,t,n){i.matches({componentClassName:"wysiwyg.viewer.components.SiteButton",skin:"wysiwyg.viewer.skins.AppPartSkin"})(e)&&(r.push(t),delete n[t])}),setTimeout(function(){r=null})),i(e.data.document_data).filter(function(e){return"AppPart"===e.type&&i.includes(o.blogAppPartNames,e.appPartName)}).forEach(function(e){i.remove(e.appLogicCustomizations,function(e){return"comp.style"===e.key&&i.includes(r,e.value)})})}}},function(e,t,n){"use strict";function i(e){return"Post"===e.forType&&"layout.spacerBefore"===e.key&&"date"===e.fieldId&&o.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry","MediaTopPage","MediaBottomPage","MediaLeftPage","MediaRightPage","MediaZigzagPage","MasonryPage","SinglePostMediaBottom","SinglePostMediaTop"],e.view)}var o=n(0),r=n(1);e.exports={exec:function(e){o(e.data.document_data).filter(function(e){return"AppPart"===e.type&&o.includes([r.blogAppPartNames.CUSTOM_FEED,r.blogAppPartNames.FEED,r.blogAppPartNames.SINGLE_POST],e.appPartName)}).forEach(function(e){o(e.appLogicCustomizations).filter(i).forEach(function(e){o.assign(e,{fieldId:"vars",key:"dateAndAuthorPosition",value:"0"===e.value?"left":"right"})})})}}},function(e,t,n){"use strict";function i(e){return"Post"===e.forType&&"comp.hidden"===e.key&&("date"===e.fieldId||"author"===e.fieldId)&&o.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry","MediaTopPage","MediaBottomPage","MediaLeftPage","MediaRightPage","MediaZigzagPage","MasonryPage","SinglePostMediaBottom","SinglePostMediaTop"],e.view)}var o=n(0),r=n(1);e.exports={exec:function(e){o(e.data.document_data).filter(function(e){return"AppPart"===e.type&&o.includes([r.blogAppPartNames.CUSTOM_FEED,r.blogAppPartNames.FEED,r.blogAppPartNames.SINGLE_POST],e.appPartName)}).forEach(function(e){o(e.appLogicCustomizations).filter(i).forEach(function(e){o.assign(e,{fieldId:"dateAndAuthor"})})})}}},function(e,t,n){"use strict";function i(e){return"Array"===e.forType&&"comp.itemsPerPage"===e.key&&o.includes(["","*"],e.format)&&o.includes(["paginatedlist","columnBlog"],e.fieldId)&&o.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry"],e.view)}var o=n(0),r=n(1);e.exports={exec:function(e){o(e.data.document_data).filter({type:"AppPart",appPartName:r.blogAppPartNames.CUSTOM_FEED}).forEach(function(e){o(e.appLogicCustomizations).filter(i).forEach(function(e){o.assign(e,{fieldId:"vars",format:"*",key:"itemsPerPage"})})})}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){i(e.data.document_data).filter({type:"AppPart"}).forEach(function(e){for(var t,n,o=e.appLogicCustomizations,r=o.length,a={};r;){var s=(t=o[r-=1],n=i.omit(t,"value"),JSON.stringify(n));a[s]?o.splice(r,1):a[s]=!0}})}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){i(e.data.document_data).filter({type:"AppPart"}).forEach(function(e){i(e.appLogicCustomizations).filter({fieldId:"tagsValue",forType:"Post",format:"",key:"value",view:"SinglePostMediaTop"}).forEach(function(e){e.format="*"})})}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r={exec:function(e){e.data&&i(e.data.document_data).filter(function(e){return e.type===r.getAppPartType()&&i.includes(r.getBlogFeedAppPartNames(),e.appPartName)}).forEach(function(e){var t=e.appLogicCustomizations;i(t).compact().filter(function(e){return e.fieldId===r.getReadMoreValueCustomizationFieldId()&&e.key===r.getReadMoreValueCustomizationKey()&&""===e.format&&i.includes(r.getAffectedReadMoreValueCustomizationViews(),e.view)}).forEach(function(e){i.remove(t,{fieldId:e.fieldId,format:"*",key:e.key,view:e.view}),e.format="*"})})},getAppPartType:function(){return"AppPart"},getBlogFeedAppPartNames:function(){return[o.blogAppPartNames.FEED,o.blogAppPartNames.CUSTOM_FEED]},getReadMoreValueCustomizationFieldId:function(){return"ReadMoreBtn"},getReadMoreValueCustomizationKey:function(){return"value"},getAffectedReadMoreValueCustomizationViews:function(){return["MediaLeft","MediaLeftPage","MediaRight","MediaRightPage","MediaZigzag","MediaZigzagPage","Masonry","MasonryPage"]}};e.exports=r},function(e,t,n){"use strict";var i=n(0),o=n(1),r={exec:function(e){e.data&&e.data.document_data&&i(e.data.document_data).filter(function(e){return r.isAppPartType(e.type)}).forEach(function(e){i(e.appLogicCustomizations).compact().groupBy("view").filter(function(e,t){return o.appPartMediaInnerViewNameUtils.isMediaInnerViewName(t)}).forEach(function(e){i(e).groupBy("fieldId").filter(function(e){return i.isEqual(i.map(e,"format"),[""])}).forEach(function(e){i.forEach(e,function(e){e.format="*"})})})})},isAppPartType:function(e){return"AppPart"===e}};e.exports=r},function(e,t,n){"use strict";function i(e){var t=function(e){var t=o.findKey(e,function(e){return e.appPageId&&"7326bfbb-4b10-4a8e-84c1-73f776051e10"===e.appPageId});if(!t)return null;var n=o.findKey(e,function(e){return e.pageId&&e.pageId==="#"+t});return o.findKey(e,function(e){return e.link&&e.link==="#"+n})}(e);t&&function(e,t){var n=e.CUSTOM_MAIN_MENU&&e.CUSTOM_MAIN_MENU.items;o.forEach(n,function(n){var i=e[n.replace("#","")].items,r=o.indexOf(i,t);if(-1!==r)return i.splice(r,1),e.CUSTOM_MAIN_MENU.items.push(t),!1})}(e,"#"+t)}var o=n(0);e.exports={exec:function(e){return e.structure&&"Document"===e.structure.type&&i(e.data.document_data),e}}},function(e,t,n){"use strict";function i(e){e.urlChoice=o.includes(e.urlChoice,"pinterest.com")?e.urlChoice:"www.pinterest.com/"+e.urlChoice}var o=n(0);e.exports={exec:function(e){return o(e.data.document_data).pickBy({type:"PinterestFollow"}).mapValues(i).value()}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){if("Page"===e.structure.type){var t=e.structure.components,n=e.data.document_data;i.forEach(t,function(e){if(i.includes(e.componentType,"DocumentMedia")){var t=e.dataQuery,o=n[t.replace("#","")];0===o.uri.indexOf("media/")&&(o.uri=o.uri.replace("media/",""))}})}return e}}},function(e,t,n){"use strict";function i(e,t){var n=s.get(t,[e.behaviorQuery,"items"],"[]");return JSON.parse(n)}function o(e,t){return t[t[e.designQuery.replace("#","")].background.replace("#","")]}function r(e,t,n){s.forEach(e,function(e){!function(e,t,n){var r=void 0;if(s.includes(u,e.componentType)){var a=o(e,t),d=a.scrollType;if(a.scrollType="none","scroll"!==d&&"none"!==d){r=i(e,n),(r=s.reject(r,{name:"ContainerFixedBg",action:"bgScrub"})).push(p[d]);var m=JSON.stringify(r);if(e.behaviorQuery)s.set(n,[e.behaviorQuery,"items"],m);else{var l=c.createBehaviorsDataItem(m);s.set(n,l.id,l),e.behaviorQuery=l.id}}}}(e,t,n),e.components&&r(e.components,t,n)})}function a(e,t,n){s.forEach(e,function(e){!function(e,t,n){var r=void 0;s.includes(u,e.componentType)&&(o(e,t).scrollType="none",r=i(e,n),r=s.reject(r,{name:"ContainerFixedBg",action:"bgScrub"}),s.isEmpty(r)?(delete e.behaviors,delete e.behaviorQuery):s.set(n,[e.behaviorQuery,"items"],JSON.stringify(r)))}(e,t,n),e.components&&a(e.components,t,n)})}var s=n(0),c=n(6),u=["wysiwyg.viewer.components.StripContainer","wysiwyg.viewer.components.StripContainerSlideShowSlide"],p={fixed:{action:"bgScrub",name:"BackgroundReveal",duration:1,delay:0},parallax:{action:"bgScrub",name:"BackgroundParallax",duration:1,delay:0}};e.exports={exec:function(e){var t=e.structure;if(t){var n=e.data.design_data,i=e.data.behaviors_data;t.components&&r(t.components,n,i),t.children&&r(t.children,n,i),t.mobileComponents&&a(t.mobileComponents,n,i)}}}},function(e,t,n){"use strict";function i(e,t,n,i,o){if(0!==e[t].indexOf("#"+i)){var a,s,c=r.cloneDeep(o[e[t].replace("#","")]),u=function(e,t,n){return e+"_"+t+"_"+n}(i,n,t);s=c,o[a=u]=r.assign({id:a},r.omit(s,"id")),e[t]="#"+u}}function o(e,t,n){var o=n[t.pageBackgrounds[e].ref.replace("#","")],r=void 0;o&&o.mediaRef&&("WixVideo"===(r=n[o.mediaRef.replace("#","")]).type&&i(r,"posterImageRef",e,t.id,n),o.imageOverlay&&i(o,"imageOverlay",e,t.id,n),i(o,"mediaRef",e,t.id,n))}var r=n(0);e.exports={exec:function(e){if(e.structure){var t=e.data.document_data,n=r.filter(t,function(e){return"Page"===e.type||"AppPage"===e.type});r.forEach(n,function(e){!function(e,t){e.pageBackgrounds&&(o("mobile",e,t),o("desktop",e,t))}(e,t)})}}}},function(e,t,n){"use strict";function i(e,t){return a.guidUtils.getUniqueId(t.id,"_")+e}function o(e,t){t[e]=r.assign({id:e},s)}var r=n(0),a=n(1),s={alignType:"center",color:"{color_11}",fittingType:"fill",scrollType:"scroll",type:"BackgroundMedia"},c={pageBackgrounds:{desktop:{custom:!0,isPreset:!0,ref:null},mobile:{custom:!0,isPreset:!0,ref:null}}};e.exports={exec:function(e){if(e.structure){var t,n,a=e.data.document_data;r.some(a,{type:"BackgroundMedia"})&&(t=a,n=r.filter(t,function(e){return"Page"===e.type||"AppPage"===e.type}),r.forEach(n,function(e){var n=void 0;r.defaults(e,c),e.pageBackgrounds.mobile.ref||(o(n=i("_mobile_bg",e),t),e.pageBackgrounds.mobile.ref="#"+n),e.pageBackgrounds.desktop.ref||(o(n=i("_desktop_bg",e),t),e.pageBackgrounds.desktop.ref="#"+n)}))}}}},function(e,t,n){"use strict";function i(e,t){var n=d.filter(e,function(e){return"Page"===e.type||"AppPage"===e.type}),i=d.map(n,"id");d.some(n,function(e){return e.pageBackgrounds&&e.pageBackgrounds.desktop.ref})?o(e):function(e,t,n,i){var o=s(t),r=s(n);d.forEach(i,function(t){var n=l.guidUtils.getUniqueId(w,v),i=l.guidUtils.getUniqueId(w,v),s=n.replace(w,g),c=i.replace(w,g);a(e,o,t,n,s,"desktop"),a(e,r,t,i,c,"mobile")})}(e,t.siteBg,t.mobileBg&&"[siteBg]"!==t.mobileBg?t.mobileBg:t.siteBg,i)}function o(e){var t=d.filter(e,{type:f});d.forEach(t,function(t){!function(e,t){var n=t.id,i=l.guidUtils.getUniqueId(g+v);r(e,function(e){return u(c.apply(this,[e.url,e.imagesizew,e.imagesizeh,e.positionx,e.positiony,e.width,e.repeatx,e.repeaty,e.attachment,e.color,e.metaData]))}(t),n,i)}(e,t)})}function r(e,t,n,i){e[n]=d.assign({id:n},t.bgItem),t.imageItem&&(e[n].mediaRef="#"+i,e[i]=d.assign({id:i},t.imageItem))}function a(e,t,n,i,o,a){e[n].pageBackgrounds=e[n].pageBackgrounds||{desktop:"",mobile:""},e[n].pageBackgrounds[a]={ref:"#"+i,custom:!0,isPreset:!1},r(e,t,i,o)}function s(e){return u(c.apply(this,d.compact(e.split(" "))))}function c(e,t,n,i,o,r,a,s,c,u,p){return{imageId:e,imageW:t,imageH:n,x:i,y:o,width:r,repeatX:a,repeatY:s,attachment:c,color:u,metaData:{isPreset:(p=p||{}).isPreset||!1,schemaVersion:"2.0",isHidden:p.isHidden||!1}}}function u(e){var t={bgItem:{}},n="rgb(255,255,255)",i=m.cssToAlignType(e.x+" "+e.y),o=m.cssToFittingType({bgRepeat:e.repeatX+" "+e.repeatY,bgSize:e.width}),r="fixed"===e.attachment?"fixed":"scroll";return o=function(e){var t={};return t[y.fittingTypes.TILE]=y.fittingTypes.LEGACY_BG_FIT_AND_TILE,t[y.fittingTypes.TILE_HORIZONTAL]=y.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL,t[y.fittingTypes.TILE_VERTICAL]=y.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL,t[y.fittingTypes.LEGACY_ORIGINAL_SIZE]=y.fittingTypes.LEGACY_BG_NORMAL,t[e]||e}(o),e.color&&"none"!==e.color&&(n=e.color),e.imageId&&"none"!==e.imageId&&(t.imageItem={type:"Image",uri:e.imageId,width:parseInt(e.imageW,10),height:parseInt(e.imageH,10),metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}}),t.bgItem={type:"BackgroundMedia",color:n,alignType:i,fittingType:o,scrollType:r,metaData:e.metaData},t}function p(e){var t=d.compact(e.split(" ")),n=c.apply(this,t).color;return n&&(n=(n=n.replace("[","{")).replace("]","}"),t[9]=n),t.join(" ")}var d=n(0),m=n(3),l=n(1),y=n(4),f="BackgroundImage",g="bgImage",w="mediaBg",v="-";e.exports={exec:function(e){if(e.structure){var t=e.data.theme_data&&e.data.theme_data.THEME_DATA,n=e.data.document_data,r=d.some(n,{type:"BackgroundMedia"}),a=d.some(n,{type:f});r&&!a||("Document"===e.structure.type?(function(e){e.siteBg=p(e.siteBg),e.mobileBg&&"[siteBg]"!==e.mobileBg&&(e.mobileBg=p(e.mobileBg))}(t),i(n,t)):o(n))}}}},function(e,t,n){"use strict";var i=n(0),o={faq:{filterAppPart:{appPartName:"f2c4fc13-e24d-4e99-aadf-4cff71092b88",viewName:"ExpandQuestions"},filterAppLogicCustomization:{type:"AppPartCustomization",forType:"Category",view:"ToggleMobile",key:"comp.initialState",fieldId:"toggle",format:"Mobile"},modify:function(e){return i.assign(e,{fieldId:"vars",key:"initialState"})}}};e.exports={exec:function(e){i(o).values().forEach(function(t){i(e.data.document_data).filter(t.filterAppPart).forEach(function(e){e.appLogicCustomizations=i(e.appLogicCustomizations).map(function(e){return i.find([e],t.filterAppLogicCustomization)?t.modify(e):e}).compact().value()})})}}},function(e,t,n){"use strict";var i=n(0),o=n(3),r={BgImageStripProperties:function(e){e.fittingType=o.cssToFittingType({bgSize:e.bgSize,bgRepeat:e.bgRepeat}),e.fittingType=o.migrateToLegacyFittings(e.fittingType),e.alignType=o.cssToAlignType(e.bgPosition),e.type="BgImageStripUnifiedProperties",delete e.bgSize,delete e.bgRepeat,delete e.bgPosition,delete e.bgUrl}};e.exports={exec:function(e){var t=e.data.component_properties;i.isEmpty(t)||function(e){i.forEach(e,function(e){var t=r[e.type];t&&t(e)})}(t)}}},function(e,t,n){"use strict";function i(e,t,n){var i=r.get(e,"pageBackgrounds."+n+".ref");i=r.replace(i,"#","");var o=r.get(t,["data","document_data",i]);o&&r.merge(o,{type:"BackgroundMedia",color:"transparent",alignType:"center",fittingType:"fill",scrollType:"none",mediaRef:null})}function o(e,t){if("masterPage"===r.get(e,"structure.id")){var n=r.get(e,"data.document_data"),o=r.find(n,{tpaApplicationId:t,tpaPageId:s});o&&(i(o,e,"desktop"),i(o,e,"mobile"))}else!function(e){var t=r.get(e,["structure","components"]),n=r.find(t,{componentType:u});if(n){var i=n.dataQuery.replace("#","");r.get(e,["data","document_data",i,"widgetId"])===a&&(e.structure.styleId=c)}}(e)}var r=n(0),a="144f04b9-aab4-fde7-179b-780c11da4f46",s="fullscreen_page",c="non_existing_style_id",u="wysiwyg.viewer.components.tpapps.TPAMultiSection";e.exports={exec:function(e,t,n,a,u,p,d,m){var l,y,f=(l=m.clientSpecMap,y=r.find(l,{appDefinitionId:"14271d6f-ba62-d045-549b-ab972ae1f70e"}),r.get(y,"applicationId"));f&&(m.isViewerMode?function(e,t){var n=r.get(e,"structure.id"),o=r.get(e,["data","document_data",n]),a=r.get(o,"tpaPageId"),u=r.get(o,"tpaApplicationId");a===s&&u===t&&(i(o,e,"desktop"),i(o,e,"mobile"),e.structure.styleId=c)}(e,f):m.isExperimentOpen("se_proGalleryBGDataFixer")&&o(e,f))}}},function(e,t,n){"use strict";function i(e,t){var n=m.find(e,{appDefinitionId:f});if(n){var i=a(t,n.applicationId);if(m.forEach(i,function(e){var i=e.data,o=m.keys(n.widgets);m.toString(i.applicationId)===m.toString(n.applicationId)&&m.includes(o,i.widgetId)||function(e,t,n){var i=l.guidUtils.getUniqueId("dataItem","-");t.dataQuery="#"+i,n.id=i,e.data.document_data[i]=n}(t,e.comp,m.assign(i,{applicationId:m.toString(n.applicationId),widgetId:g}))}),!function(e){return!0===m.get(e,"permissions.revoked")}(n)&&!i.length){var r=m.get(n,"widgets."+g),c=s("comp","-"),u=s("dataItem","-"),p=s("propItem","-"),d=o(c,u,p,r);t.structure.children.push(d),t.data.document_data[u]=function(e,t){return{type:"TPAWidget",id:t,metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:m.toString(e.applicationId),widgetId:g}}(n,u),t.data.component_properties[p]=function(e){return{type:"TPAGluedProperties",metaData:{schemaVersion:"1.0"},placement:m.get(e,"gluedOptions.placement"),verticalMargin:m.get(e,"gluedOptions.verticalMargin"),horizontalMargin:m.get(e,"gluedOptions.horizontalMargin")}}(r),t.data.theme_data[d.styleId]||(t.data.theme_data[d.styleId]={type:"TopLevelStyle",styleType:"system",compId:"",componentClassName:"wysiwyg.viewer.components.tpapps.TPAGluedWidget",pageId:"",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",style:{groups:{},properties:{},propertiesSource:{}},id:d.styleId,metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}})}}}function o(e,t,n,i,o){return{type:"Component",styleId:o||"tpagw0",id:e,dataQuery:"#"+t,skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:m.get(i,"defaultWidth")||320,height:m.get(i,"defaultHeight")||250,x:m.get(i,"x")||0,y:m.get(i,"y")||0,scale:1,rotationInDegrees:0,fixedPosition:m.get(i,"fixedPosition")||!0},propertyQuery:n,componentType:"wysiwyg.viewer.components.tpapps.TPAGluedWidget"}}function r(e,t,n,i){return o(e,t=d(t),n=d(n),{x:10,y:10,width:0,height:5,fixedPosition:!1},i)}function a(e,t){return m(e.structure.children).filter(function(n){if(!n.dataQuery)return!1;var i=e.data.document_data[n.dataQuery.replace("#","")];return m.get(i,"widgetId")===g||m.toString(m.get(i,"applicationId"))===m.toString(t)}).map(function(t){return{comp:t,data:e.data.document_data[t.dataQuery.replace("#","")]}}).value()}function s(e,t){return function(e,t,n,i){t=t||"",n=n||"";var o=i;return o===e.lastGeneratedId?e.counter++:(e.lastGeneratedId=o,e.counter=0),t+n+Number(e.lastGeneratedId).toString(36)+(e.counter||"")}(v,e,t,Date.now())}function c(e,t){var n=m.find(t,{appDefinitionId:f}),i=a(e).length>0;e&&e.structure.id===w&&n&&!m.get(n,"permissions.revoked")&&i&&u(e.data,e.structure.children,n)&&!u(e.data,e.structure.mobileComponents,n)&&function(e,t){var n=e.structure.mobileComponents,i=m.find(n,{id:"SITE_FOOTER"}),o=t.dataQuery,a=t.propertyQuery,s=t.styleId;i&&m.isArray(i.components)?i.components.push(r(t.id,o,a,s)):n.push(r(t.id,o,a,s))}(e,p(e.data.document_data,e.structure.children,n))}function u(e,t,n){return!!p(e.document_data,t,n)}function p(e,t,n){for(var i=[].concat(t);!m.isEmpty(i);){var o=i.shift();if(o.componentType===y){var r=e[d(o.dataQuery)];if(Number(r.applicationId)===Number(n.applicationId))return o}m.isEmpty(o.components)||(i=i.concat(o.components))}return null}function d(e){return e&&"#"===e[0]?e.substr(1):e}var m=n(0),l=n(1),y="wysiwyg.viewer.components.tpapps.TPAGluedWidget",f="14517e1a-3ff0-af98-408e-2bd6953c36a2",g="14517f3f-ffc5-eced-f592-980aaa0bbb5c",w="masterPage",v={lastGeneratedId:void 0,counter:0};e.exports={exec:function(e,t,n,o,r,a,s,u){var p=m.get(u,"clientSpecMap");if("masterPage"===e.structure.id){i(p,e);var d=m.get(u,"quickActionsMenuEnabled");m.get(e,"structure.id")!==w||d||c(e,p)}}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){"masterPage"===i.get(e,"structure.id")&&function(e){i.forEach(e.structure.children,function(e){"wysiwyg.viewer.components.tpapps.TPAGluedWidget"===e.componentType&&(e.layout.fixedPosition=!0)})}(e)}}},function(e,t,n){"use strict";e.exports={exec:function(e){var t=e.data;t.document_data.THEME_DATA&&(t.theme_data.THEME_DATA||(t.theme_data.THEME_DATA=t.document_data.THEME_DATA),delete t.document_data.THEME_DATA)}}},function(e,t,n){"use strict";var i=n(0),o=n(1);e.exports={exec:function(e){function t(t,r){var a=(t.linkType||"").toLowerCase(),s=r?function(){var t=i.keys(e.data.document_data),n=void 0;do{n=(n=(new Date).getTime().toString(36)+"_"+Math.round(99999*Math.random()).toString(36)).replace(/\s/g,"_")}while(t[n]);return n}():t.id;switch(a){case"page":return function(e,t){var i={};i.id=e,i.type="PageLink";var o=t.href;if(!o)return null;var r=o.lastIndexOf("/");return r<0&&(r=o.lastIndexOf("|")),o=o.substr(r+1),i.pageId=n(o),i}(s,t);case"website":return function(e,t){var n={};n.id=e,n.type="ExternalLink",n.target=function(e){var t=i.indexOf(c.oldValues,e);return i.includes(c.newValues,e)?e:-1!==t?c.newValues[t]:c.newValues[1]}(t.target);var o=t.href;return o?(n.url=o,n):null}(s,t);case"email":return function(e,t){var n={};n.id=e,n.type="EmailLink";var i=t.href;if(!i||!i.toLowerCase)return null;o.stringUtils.startsWith(i,"mailto:",!0)&&(i=i.substr("mailto:".length));var r=i.split("?");if(n.recipient=r[0],r[1]){var a=function(e){for(var t={},n=/([^&=]+)=([^&]*)/g,i=void 0;i=n.exec(e);)t[i[1]]=i[2];return t}(r[1]);a.subject&&(n.subject=a.subject),a.body&&(n.body=a.body)}return n}(s,t);case"document":return function(e,t){var n={},i=void 0;n.type="DocumentLink",n.id=e;var o=t.href;if(!o)return null;var r=(i=o.substr(o.lastIndexOf("/")+1)).indexOf("?dn=");return-1!==r&&(i=i.substring(0,r)),n.docId=i,n.name=t.text,n}(s,t);case"login":return function(e,t){var n={};n.id=e,n.type="LoginToWixLink";var i=t.text;return i&&o.stringUtils.startsWith(i,"{")&&(i=JSON.parse(i),n.postLoginUrl=i.postLoginUrl,n.postSignupUrl=i.postSignupUrl,n.dialog=i.type),n}(s,t);case"admin_login":case"free_link":case"":default:return null}}function n(e){return e?e&&o.stringUtils.startsWith(e,"#")?e:"#"+e:null}var r,a={toFix:["FlashComponent","SiteButton","Image"],newNames:["LinkableFlashComponent","LinkableButton","Image"],originalLink:["TextLink","Link"]},s=["href","text","target","icon","linkType"],c={oldValues:["same","other"],newValues:["_self","_blank"]},u=e.data.document_data,p={},d=void 0;r=u,d=i.filter(r,function(e){var t=!(e.type===a.toFix[2])||"2.0"!==e.metaData.schemaVersion;return!e.link&&i.includes(a.toFix,e.type)&&t}),i.forEach(d,function(e){var o=function(e){var o=i.indexOf(a.toFix,e.type),r=a.newNames[o],c=i.defaults({type:r},i.omit(e,s)),u=t(e,!0);return u&&(c.link=n(u.id),p[u.id]=u),e.type===c.type&&(c.metaData.schemaVersion="2.0"),c}(e);o&&(u[e.id]=o)}),d=function(e){return i.filter(e,function(e){return e.linkType&&i.includes(a.originalLink,e.type)})}(u),i.forEach(d,function(e){var n=t(e);n&&(u[e.id]=n)}),i.assign(u,p)}}},function(e,t,n){"use strict";function i(e){r.isEmpty(e.components)||(e.components=[])}function o(e){e.layout&&(e.layout.y=0)}var r=n(0);e.exports={exec:function(e){if(e.structure&&"Document"===e.structure.type){var t=function(e){var t=void 0;if(e.structure.children){var n=r.find(e.structure.children,{id:"PAGES_CONTAINER"});n&&!r.isEmpty(n.components)&&(t=r.find(n.components,{id:"SITE_PAGES"}))}return t}(e),n=function(e){var t=void 0;if(e.structure.mobileComponents){var n=r.find(e.structure.mobileComponents,{id:"PAGES_CONTAINER"});n&&!r.isEmpty(n.components)&&(t=r.find(n.components,{id:"SITE_PAGES"}))}return t}(e);t&&(i(t),o(t)),n&&(i(n),o(n))}return e}}},function(e,t,n){"use strict";function i(e){if(!e.rotationInDegrees)return e.height;var t=e.rotationInDegrees*Math.PI/180;return parseInt(Math.abs(e.width*Math.sin(t))+Math.abs(e.height*Math.cos(t)),10)}function o(e){if(!e.rotationInDegrees)return e.y;var t=i(e);return parseInt(e.y-(t-e.height)/2,10)}function r(e){return s.maxBy(e,function(e){return o(e.layout)})}function a(e){if(e&&!s.isEmpty(e)&&(n=e).length&&n[0].layout&&n[0].layout.anchors){var t=function(e){var t={};return s.forEach(e,function(e){switch(e.id){case"SITE_HEADER":return t.header=e,!(t.footer&&t.pagesContainer);case"SITE_FOOTER":return t.footer=e,!(t.header&&t.pagesContainer);case"PAGES_CONTAINER":return t.pagesContainer=e,!(t.header&&t.footer);default:return!0}}),t}(e);!function(e){var t=e.pagesContainer,n=e.header;t&&n&&(s.remove(t.layout.anchors,{targetComponent:"SITE_HEADER",type:"TOP_TOP"}),s.remove(n.layout.anchors,{targetComponent:"PAGES_CONTAINER",type:"TOP_TOP"}))}(t),function(e,t){var n=t.pagesContainer,a=t.header,c=t.footer,u=n&&n.components&&s.find(n.components,{id:"SITE_PAGES"});if(!u||!u.layout||u.layout.anchors&&0!==u.layout.anchors.length||(u.layout.anchors=[{distance:0,locked:!0,originalValue:0,targetComponent:"PAGES_CONTAINER",type:"BOTTOM_PARENT"}]),n&&n.layout&&(!n.layout.anchors||0===n.layout.anchors.length)&&c&&c.layout&&!c.layout.fixedPosition&&(n.layout.anchors=[{distance:10,locked:!0,originalValue:0,targetComponent:"SITE_FOOTER",type:"BOTTOM_TOP"}]),a&&!s.find(e,function(e){return s.find(e.layout.anchors,{type:"BOTTOM_PARENT",targetComponent:"masterPage"})})){var p=r(e);if(!p.layout.anchors)return;p.layout.anchors.push({distance:0,locked:!0,originalValue:o(p.layout)+i(p.layout)+(a?i(a.layout):0),targetComponent:"masterPage",type:"BOTTOM_PARENT"})}}(e,t)}var n}var s=n(0);e.exports={exec:function(e){var t=e.structure;t&&"Document"===t.type&&(a(t.children),a(t.mobileComponents))},test:{getBoundingHeight:i,getBoundingY:o,getLowestComp:r}}},function(e,t,n){"use strict";function i(e){l[e.componentType]&&(e.layout.anchors=[])}function o(e){return e.layout&&e.layout.y+e.layout.height}function r(e){return e.layout&&e.layout.anchors||[]}function a(e,t,n){if("BOTTOM_TOP"===e.type){var i=r(n[e.targetComponent]);p.remove(i,{targetComponent:t.id});var a=p.filter(i,{type:"TOP_TOP"}),s=o(t)+10;p.forEach(a,function(e){n[e.targetComponent]&&function e(t,n,i,a,s){if(!(s[t.id]||o(t)>i)){s[t.id]=!0;var c=r(t);p.remove(c,function(t){if(t.targetComponent===n.id)return!0;if("BOTTOM_PARENT"!==t.type){if(!a[t.targetComponent])return!0;e(a[t.targetComponent],n,i,a,s)}return!1})}}(n[e.targetComponent],t,s,n,{})})}}function s(e,t,n){var i=t.id,o=n[e.targetComponent];if("BOTTOM_PARENT"===e.type&&(o=e.targetComponent===i?t:null),!o)return!1;if("BOTTOM_BOTTOM"===e.type&&m[o.componentType])return!1;if("BOTTOM_PARENT"!==e.type&&(l[o.componentType]||"wysiwyg.viewer.components.HeaderContainer"===o.componentType&&o.layout&&!0===o.layout.fixedPosition))return!1;var r,a,s,c,u=void 0;if(o.layout&&p.isNumber(o.layout.height)&&p.isNumber(o.layout.y)){var d=o.layout,y=(r=d.height,a=d.width,s=d.rotationInDegrees,c=(s||0)*Math.PI/180,parseInt(Math.abs(a*Math.sin(c))+Math.abs(r*Math.cos(c)),10)),f=function(e,t,n){return parseInt(e-(n-t)/2,10)}(d.y,d.height,y);u="BOTTOM_PARENT"===e.type||"BOTTOM_BOTTOM"===e.type?y:f}else u=0;return e.originalValue=Math.min(e.originalValue,u),!0}function c(e,t){return function(e,t){t&&i(e)}(e,t),function e(t,n){var o=n?t[n]:t.components;if(!p.isEmpty(o)){var c=p.transform(o,function(e,t){e[t.id]=t},{});!function(e){p.forEach(e,function(t){var n=r(t);n=p.reject(n,{type:"BOTTOM_PARENT"}),p.remove(n,function(t){return!p.some(e,{id:t.targetComponent})})})}(o),p.forEach(o,function(n){var o=r(n);!function(e){p.remove(e,function(e){return null===e.distance||isNaN(e.distance)})}(o),i(n),function(e,t){"Document"===e.type&&p.forEach(t,function(e){"SITE_STRUCTURE"===e.targetComponent&&(e.targetComponent="masterPage")})}(t,o),function(e,t,n){t=p.reject(t,{type:"BOTTOM_PARENT"}),p.forEach(t,function(t){var i=n[t.targetComponent];if(i){var o=p.filter(r(i),{targetComponent:e.id,type:t.type});p.forEach(o,function(n){var o=e.layout.y<i.layout.y?i:e,r=e.layout.y<i.layout.y?n:t;p.remove(o.layout.anchors,function(e){return e===r})})}})}(n,o,c),p.remove(o,function(e){!function(e){"TOP_TOP"===e.type&&(e.locked=!0)}(e);var i=s(e,t,c);return i&&a(e,n,c),!i}),e(n)})}}(e,t)}function u(e){var t=p.head(e);return!!p.get(t,"layout.anchors")}var p=n(0),d=n(5),m={"wysiwyg.common.components.anchor.viewer.Anchor":!0,"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":!0,"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":!0,"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":!0,"wixapps.integration.components.AppPart":!0,"wixapps.integration.components.AppPart2":!0,"wixapps.integration.components.common.minipart":!0,"wysiwyg.common.components.onlineclock.viewer.OnlineClock":!0,"wysiwyg.common.components.weather.viewer.Weather":!0,"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":!0,"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":!0,"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":!0,"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":!0,"wysiwyg.viewer.components.ContactForm":!0,"wysiwyg.viewer.components.FacebookShare":!0,"wysiwyg.viewer.components.FiveGridLine":!0,"wysiwyg.viewer.components.FlickrBadgeWidget":!0,"wysiwyg.viewer.components.ItunesButton":!0,"wysiwyg.viewer.components.LinkBar":!0,"wysiwyg.viewer.components.PayPalButton":!0,"wysiwyg.viewer.components.PinterestFollow":!0,"wysiwyg.viewer.components.VKShareButton":!0,"wysiwyg.viewer.components.WFacebookComment":!0,"wysiwyg.viewer.components.WGooglePlusOne":!0,"wysiwyg.viewer.components.mobile.TinyMenu":!0},l={"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":!0,"wysiwyg.viewer.components.tpapps.TPAGluedWidget":!0,"mobile.core.components.Page":!0,"wixapps.integration.components.AppPage":!0};e.exports={exec:function(e){var t=e.structure,n="components";t&&("Document"===t.type&&((t=p.clone(e.structure)).id="masterPage",e.structure=t,n="children"),u(t[n])&&c(t,n),u(t.mobileComponents)&&(c(t,"mobileComponents"),d.fixBottomTopBottomBottomCycles(t.mobileComponents)))}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){var t,n,o=e.structure;if(o&&o.components&&!i.isEmpty(o.components)&&(t=o.components,n=i.head(t),
i.get(n,"layout.anchors"))){var r=i.maxBy(o.components,function(e){var t=-1*Number.MAX_VALUE;return e.layout&&i.isNumber(e.layout.y)&&i.isNumber(e.layout.height)&&(t=e.layout.y+e.layout.height),t}),a=void 0;r.layout&&r.layout.anchors&&(a=i.find(r.layout.anchors,{type:"BOTTOM_PARENT"})),a||(r.layout=r.layout||{},r.layout.anchors=r.layout.anchors||[],r.layout.anchors.push({distance:0,type:"BOTTOM_PARENT",targetComponent:e.structure.id,locked:!0,originalValue:e.structure.layout.height,topToTop:r.layout.y}))}}}},function(e,t,n){"use strict";function i(e){o.forEach(e,function(e){if(o.has(r,e.skin)){var t=r[e.skin];e.layout=o.mapValues(e.layout,function(e,n){return t[n]?Math.max(e,t[n]):e})}e.components&&i(e.components)})}var o=n(0),r={"wysiwyg.viewer.skins.line.FadeLine":{width:90},"wysiwyg.viewer.skins.line.FadeNotchBottomLine":{width:60},"wysiwyg.viewer.skins.line.FadeNotchTopLine":{width:60},"wysiwyg.viewer.skins.line.ShadowBottomLine":{width:200},"wysiwyg.viewer.skins.line.ShadowTopLine":{width:200}};e.exports={exec:function(e){var t=e.structure;t&&(t.components&&i(t.components),t.children&&i(t.children),t.mobileComponents&&i(t.mobileComponents))}}},function(e,t,n){"use strict";var i=n(0);e.exports={exec:function(e){var t=i.get(e,"data");t.connections_data=t.connections_data||{}}}},function(e,t,n){"use strict";var i=n(0),o=n(1),r=n(6);e.exports={exec:function(e){var t=i.get(e,"data"),n=i.get(e,"structure");t.behaviors_data=t.behaviors_data||{};var a,s,c=(a=n,s=o.dataUtils.getAllCompsInStructure(a,!1),i.pickBy(s,"behaviors")),u=function(e,t){var n=o.dataUtils.getAllCompsInStructure(e,!0);return i.pickBy(n,function(e){return t[e.id]})}(n,c);i.forEach(c,function(e){var n=r.createBehaviorsDataItem(e.behaviors);!function(e,t,n){e.behaviorQuery=t.id,n&&(n.behaviorQuery=e.behaviorQuery)}(e,n,u[e.id]),delete e.behaviors,i.set(t,["behaviors_data",n.id],n)})}}},function(e,t,n){"use strict";function i(e){return["behaviors_data",e.behaviorQuery,"items"]}function o(e){return c.has(e,"behaviors_data")}function r(e,t,n){var r=JSON.stringify(e);o(n)?c.set(n,i(t),r):t.behaviors=r}function a(e,t){var n=[],a=function(e,t){return o(t)?c.get(t,i(e),"[]"):e.behaviors||"[]"}(e,t),s=JSON.parse(a);if(c.isEmpty(s))o(t)?delete e.behaviorQuery:delete e.behaviors;else{if(c.isArray(s)){var u=!1;return c.forEach(s,function(t){var n=c.get(t,"action.sourceId");n&&n!==e.id&&(t.action.sourceId=e.id,u=!0)}),void(u&&r(s,e,t))}c.forEach(s,function(e,t){c.forEach(e,function(e,i){c.forEach(e,function(e){var o=c.assign({targetId:i,action:t},e);"screenIn"!==t&&"pageIn"!==t||(o.targetId=""),n.push(o)})})}),r(n,e,t)}}function s(e,t){c.forEach(e,function(e){a(e,t),e.components&&s(e.components,t)})}var c=n(0),u=n(66);e.exports={exec:function(e){u.exec(e);var t=e.structure;t&&(t.components&&s(t.components,e.data),t.mobileComponents&&s(t.mobileComponents,e.data),t.children&&s(t.children,e.data))}}},function(e,t,n){"use strict";function i(e){return(o.isUndefined(e.galleryImageOnClickAction)||"unset"===e.galleryImageOnClickAction)&&(!1===e.expandEnabled?e.galleryImageOnClickAction="disabled":e.galleryImageOnClickAction="zoomMode"),e}var o=n(0),r=["GalleryExpandProperties","MatrixGalleryProperties","PaginatedGridGalleryProperties","SliderGalleryProperties","SlideShowGalleryProperties"];e.exports={exec:function(e){var t,n,a;t=e.data.component_properties,n=r,a=i,o(t).pickBy(function(e){return o.includes(n,e.type)}).mapValues(a).value()}}},function(e,t,n){"use strict";function i(e,t,n){var i=e[n.componentType];i&&(n.componentType=i.comp,i.dataQuery&&(n.dataQuery=i.dataQuery),i.callback&&i.callback(t))}function o(e,t){"wysiwyg.viewer.components.ItunesButton"===t.componentType&&(t.layout.height=Math.round(t.layout.width/2.75))}function r(e,t){return e.data.component_properties[t.propertyQuery]}function a(e,t){return t.dataQuery&&e.data.document_data[t.dataQuery.replace("#","")]}function s(e,t,n){e.data.component_properties[t.propertyQuery]=n}function c(e,t,n){var i=S.guidUtils.getUniqueId("dataItem","-");t.dataQuery="#"+i,n.id=i,e.data.document_data[i]=n}function u(e,t){"SITE_FOOTER"!==t.id||t.layout||(t.layout={anchors:[],fixedPosition:!1,height:function(e){if(e.components.length>0){var t=k.map(e.components,function(e){return e.layout.y+e.layout.height});return k.max(t)}return 0}(t),rotationInDegrees:0,scale:1,width:320,x:0,y:function(e){var t=k.find(e.structure.children,{id:"PAGES_CONTAINER"});return t.layout.y+t.layout.height}(e)})}function p(e,t){if(!a(e,t))switch(t.componentType){case"wysiwyg.viewer.components.svgshape.SvgShape":c(e,t,{link:null,type:"SvgShape"});break;case"wysiwyg.viewer.components.WFacebookComment":return void c(e,t,{type:"WFacebookComment",urlFormat:"hashBang"});case"wysiwyg.viewer.components.WFacebookLike":return void c(e,t,{type:"WFacebookLike",urlFormat:"hashBang"})}}function d(e,t){var n=a(e,t);if(n)switch(t.componentType){case"wysiwyg.viewer.components.ClipArt":return void(n.title="");case"wysiwyg.viewer.components.FacebookShare":case"wysiwyg.viewer.components.VKShareButton":case"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":case"wysiwyg.viewer.components.WTwitterTweet":case"wysiwyg.viewer.components.WFacebookComment":case"wysiwyg.viewer.components.WFacebookLike":return void(n.urlFormat=n.urlFormat||"hashBang")}}function m(e,t,n){"wysiwyg.common.components.anchor.viewer.Anchor"===n.componentType&&0===n.layout.width&&(n.layout.width=e)}function l(e,t){if(!r(e,t))switch(t.componentType){case"wysiwyg.viewer.components.menus.DropDownMenu":s(e,t,{alignButtons:"center",alignText:"center",sameWidthButtons:!1,moreButtonLabel:"More",moreItemHeight:15,stretchButtonsToMenuWidth:!0,type:"HorizontalMenuProperties"});break;case"wysiwyg.viewer.components.mobile.TinyMenu":t.propertyQuery="TINY_MENU",s(e,t,{direction:"left",type:"TinyMenuProperties",id:"TINY_MENU",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}})}}function y(e,t,n){e.properties[n.id]=r(t,n)}function f(e,t,n){!r(t,n)&&e.properties[n.id]&&s(t,n,e.properties[n.id])}function g(e,t){var n=r(e,t);if(t.propertyQuery&&n)switch(t.componentType){case"wysiwyg.viewer.components.WFacebookLike":case"wysiwyg.viewer.components.PayPalButton":case"wysiwyg.viewer.components.GoogleMap":n.language||(n.language="en");break;case"wysiwyg.viewer.components.WRichText":"WRichTextProperties"!==n.type&&delete t.propertyQuery;break;case"wysiwyg.viewer.components.HoverBox":n.mobileDisplayedModeId&&function(e,t){var n=k.get(e,"modes.definitions");return!k.some(n,{modeId:t})}(t,n.mobileDisplayedModeId)&&(n.mobileDisplayedModeId=function(e){var t=k.get(e,"modes.definitions");return k.find(t,{type:S.siteConstants.COMP_MODES_TYPES.HOVER}).modeId}(t))}}function w(e,t,n){k.forEach(t,function(t){k.forEach(n,function(n){n(e,t)}),t.components&&w(e,t.components,n)})}function v(e){return k.partial(i,function(e){var t={"wysiwyg.viewer.components.HorizontalMenu":{comp:"wysiwyg.viewer.components.menus.DropDownMenu",dataQuery:"#MAIN_MENU"}};return e&&(t["wysiwyg.viewer.components.ClipArt"]={comp:"wysiwyg.viewer.components.WPhoto"}),t}(e))}function T(e,t,n){e.pageContainsStructuresWithoutJsonAnchors=e.pageContainsStructuresWithoutJsonAnchors||!n.layout||!n.layout.anchors}function h(e,t){t.layout&&delete t.layout.anchors}var k=n(0),S=n(1);e.exports={exec:function(e,t,n,i,r,a,s,c){var S=e.structure;if(S){var I={properties:{}},_=S.components||S.children,E=S.mobileComponents,M=c.isExperimentOpen("merge_clipart_and_image");_&&function(e,t,n,i){w(e,n,[v(i),o,p,l,g,d,k.partial(m,1920),k.partial(y,t)])}(e,I,_,M),E&&function(e,t,n,i){var r={pageContainsStructuresWithoutJsonAnchors:!1};w(e,n,[v(i),o,p,l,g,d,u,k.partial(m,320),k.partial(f,t),k.partial(T,r)]),r.pageContainsStructuresWithoutJsonAnchors&&w(e,n,[h])}(e,I,E,M)}}}},function(e,t,n){"use strict";function i(e){return e&&"wysiwyg.viewer.components.BgImageStrip"===e.componentType}function o(e,t,n){if(i(n)){var o=function(e){return e&&e.dataQuery&&e.dataQuery.replace("#","")}(n),r=o&&t[o];r&&(r.title=r.title||"",function(e){return e.uri.slice(0-c.length)===c}(r)||(e[n.id]=o))}}function r(e,t,n){if(i(n)){var o=e[n.id];o?n.dataQuery="#"+o:delete n.dataQuery}}function a(e,t){s.forEach(e,function(e){t(e),a(e.components,t)})}var s=n(0),c="add_image_thumb.png";e.exports={exec:function(e){var t=e.structure,n=t&&(t.components||t.children),i=t&&t.mobileComponents;if(n){var s={};a(n,o.bind(null,s,e.data.document_data)),a(n,r.bind(null,s,e.data.document_data)),a(i,r.bind(null,s,e.data.document_data))}}}},function(e,t,n){"use strict";function i(e,t,n){return e[n.replace("llt_","llf_")]=t,e}function o(e){e.style.properties=r.reduce(e.style.properties,i,{}),e.style.propertiesSource=r.reduce(e.style.propertiesSource,i,{})}var r=n(0),a={"*":function(e){"THEME_DATA"!==e.id&&(e.style||(e.style={properties:{},propertiesSource:{},groups:{}}))},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutFlat":o,"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutTransparentWithIcon":o};e.exports={exec:function(e){var t=e.data&&e.data.theme_data;r.isEmpty(t)||(function(e){if(!e.v2){var t={type:"TopLevelStyle",id:"v2",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{brd:"color_15",brw:"0px",rd:"0px",shd:"0 1px 4px rgba(0, 0, 0, 0.6);"},propertiesSource:{brd:"theme",brw:"value",rd:"value",shd:"value"},groups:{}},componentClassName:"",pageId:"",compId:"",styleType:"system",skin:"wysiwyg.viewer.skins.video.VideoDefault"};e.v2=r.cloneDeep(e.vl)||t}}(t),function(e){r.forOwn(e,function(e){a["*"](e),a[e.skin]&&a[e.skin](e)})}(t),r.forEach(t,function(e){!function(e){e.style&&r.forEach(e.style.properties,function(e,t,n){"string"==typeof e&&(n[t]=e.replace(/(\d)x/g,"$1px"))})}(e)}))}}},function(e,t,n){"use strict";function i(e){e.skin&&a[e.skin]&&(e.skin=a[e.skin])}function o(e,t){var n=void 0,r=void 0,a=e[t]||e.components;if(a)for(n=0;n<a.length;n++)i(r=a[n]),o(r,t)}var r=n(0),a={"mobile.core.skins.InlineSkin":"skins.core.VerySimpleSkin","mobile.core.skins.TwitterTweetSkin":"skins.core.TwitterTweetSkin","mobile.core.skins.ButtonSkin":"skins.core.ButtonSkin","mobile.core.skins.ContactItemSkin":"skins.core.ContactItemSkin","mobile.core.skins.ContactListSkin":"skins.core.ContactListSkin","mobile.core.skins.FacebookCommentSkin":"skins.core.FacebookCommentSkin","mobile.core.skins.GlobalMenuSkin":"skins.core.GlobalMenuSkin","mobile.core.skins.GooglePlusOneSkin":"skins.core.GooglePlusOneSkin","mobile.core.skins.HeaderSkin":"skins.core.HeaderSkin","mobile.core.skins.HomeButtonSkin":"skins.core.HomeButtonSkin","mobile.core.skins.ImageNewSkin":"skins.core.ImageNewSkin","mobile.core.skins.ImageSkin":"skins.core.ImageSkin","mobile.core.skins.MenuButtonSkin":"skins.core.MenuButtonSkin","mobile.core.skins.NetworkItemSkin":"skins.core.NetworkItemSkin","mobile.core.skins.NetworkListSkin":"skins.core.NetworkListSkin","mobile.core.skins.PageTitleSkin":"skins.core.PageTitleSkin","mobile.core.skins.PhotoFullScreenSkin":"skins.core.PhotoFullScreenSkin","mobile.core.skins.PhotoGalleryFullScreenDefaultSkin":"skins.core.PhotoGalleryFullScreenDefaultSkin","mobile.core.skins.PhotoGalleryGridDefaultSkin":"skins.core.PhotoGalleryGridDefaultSkin","mobile.core.skins.PhotoSkin":"skins.core.PhotoSkin","mobile.core.skins.RichTextImageSkin":"skins.core.RichTextImageSkin","mobile.core.skins.RichTextSkin":"skins.core.RichTextSkin","mobile.core.skins.ServiceItemSkin":"skins.core.ServiceItemSkin","mobile.core.skins.ServiceListSkin":"skins.core.ServiceListSkin","mobile.core.skins.SimpleButtonSkin":"skins.core.SimpleButtonSkin","mobile.core.skins.SiteNavigationMenuSkin":"skins.core.SiteNavigationMenuSkin","mobile.core.skins.TwitterFollowSkin":"skins.core.TwitterFollowSkin","mobile.core.skins.FacebookLikeSkin":"skins.core.FacebookLikeSkin","skins.viewer.gallerymatrix.PolaroidCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.PolaroidCustomHeightSkin","skins.viewer.gallerymatrix.PolaroidDisplayerCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.PolaroidDisplayerCustomHeightSkin","skins.viewer.gallerymatrix.TextBottomCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.TextBottomCustomHeightSkin","skins.viewer.gallerymatrix.TextBottomDisplayerCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.TextBottomDisplayerCustomHeightSkin","skins.viewer.galleryslider.SliderGalleryScotchTapeSkin":"wysiwyg.viewer.skins.galleryslider.SliderGalleryScotchTapeSkin","skins.viewer.galleryslider.SliderGalleryIronSkin":"wysiwyg.viewer.skins.galleryslider.SliderGalleryIronSkin","skins.viewer.galleryslider.SliderDisplayerIronSkin":"wysiwyg.viewer.skins.galleryslider.SliderDisplayerIronSkin","skins.viewer.galleryslider.SliderDisplayerScotchTapeSkin":"wysiwyg.viewer.skins.galleryslider.SliderDisplayerScotchTapeSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGallerySeparateTextBoxSkin":"wysiwyg.common.components.matrixgallery.viewer.skins.MatrixGallerySeparateTextBoxSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryTextOnCenterSkin":"wysiwyg.common.components.matrixgallery.viewer.skins.MatrixGalleryTextOnCenterSkin","wysiwyg.viewer.skins.dropmenu.TextOnlyMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.TextSeparatorsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SolidColorMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.ShinyMenuINSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIButtonSkin","wysiwyg.viewer.skins.dropmenu.ShinyMenuIINSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.dropmenu.OverlineMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateBasicMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateShinyIMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateShinyIIMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.LinesMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateLinesMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.PointerMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.RibbonsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.VerticalRibbonsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.VerticalRibbonsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.IndentedMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateIndentedMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.ArrowRightMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SloppyBorderMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin","wysiwyg.viewer.skins.menu.ShinyMenuISkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.menu.ShinyMenuIISkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.menu.TextOnlyMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonBgFixSkin","wysiwyg.viewer.skins.menu.TextSeparatorsMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin","wysiwyg.viewer.skins.menu.SolidColorMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin","wysiwyg.viewer.skins.menu.OverlineMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.SeparateBasicMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateShinyIMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateShinyIIMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonBorderRadiusFixSkin","wysiwyg.viewer.skins.menu.LinesMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonBorderRadiusFixSkin","wysiwyg.viewer.skins.menu.SeparateLinesMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.PointerMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.RibbonsMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin","wysiwyg.viewer.skins.menu.IndentedMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateIndentedMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin","wysiwyg.viewer.skins.menu.ArrowRightMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin","wysiwyg.viewer.skins.menu.SloppyBorderMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin","tpa.viewer.skins.TPAMasonrySkin":"wysiwyg.viewer.skins.TPAMasonrySkin","tpa.viewer.skins.TPA3DCarouselSkin":"wysiwyg.viewer.skins.TPA3DCarouselSkin","tpa.viewer.skins.TPA3DGallerySkin":"wysiwyg.viewer.skins.TPA3DGallerySkin","tpa.viewer.skins.TPAAccordionSkin":"wysiwyg.viewer.skins.TPAAccordionSkin","tpa.viewer.skins.TPACollageSkin":"wysiwyg.viewer.skins.TPACollageSkin","tpa.viewer.skins.TPAEcomGallerySkin":"wysiwyg.viewer.skins.TPAEcomGallerySkin","tpa.viewer.skins.TPAFreestyleSkin":"wysiwyg.viewer.skins.TPAFreestyleSkin","tpa.viewer.skins.TPAHoneycombSkin":"wysiwyg.viewer.skins.TPAHoneycombSkin","tpa.viewer.skins.TPAImpressSkin":"wysiwyg.viewer.skins.TPAImpressSkin","tpa.viewer.skins.TPAStripShowcaseSkin":"wysiwyg.viewer.skins.TPAStripShowcaseSkin","tpa.viewer.skins.TPAStripSlideshowSkin":"wysiwyg.viewer.skins.TPAStripSlideshowSkin","tpa.viewer.skins.TPAThumbnailsSkin":"wysiwyg.viewer.skins.TPAThumbnailsSkin","tpa.common.skins.TPAPreloaderSkin":"wysiwyg.viewer.skins.TPAPreloaderSkin","tpa.common.skins.TPAUnavailableMessageOverlaySkin":"wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin"};e.exports={exec:function(e){var t=e.structure;t&&(o(t,"children"),o(t,"mobileComponents"),i(t));var n=e.data&&e.data.theme_data;n&&r.forEach(n,function(e){i(e)})}}},function(e,t,n){"use strict";function i(e,t,n,i){var o=this.getComponentData(e,i);o&&"CustomMenuDataRef"===o.type||(delete i.dataQuery,this.setComponentData(e,i,{menuRef:"#CUSTOM_MAIN_MENU",type:"CustomMenuDataRef"},t))}var o=new(n(2))({"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":i,"wysiwyg.viewer.components.menus.DropDownMenu":i});e.exports={exec:o.migratePage.bind(o)}},function(e,t,n){"use strict";function i(e){return function e(t){return c.reduce(t.items,function(t,n){return t.push(n.refId),n.items&&n.items.length?t.concat(e(n)):t},[])}(e.MAIN_MENU)}function o(e,t){var n=c.findIndex(e.items,{refId:t});if(n>=0)!function(e,t){var n=e.items[t];n.items&&n.items.length>0&&c.forEach(n.items,function(t,i){e.items.push(t),delete n.items[i]}),n.items=[],e.items.splice(t,1)}(e,n);else{var i=function(e,t){var n={};return c.find(e.items,function(e,i){return n.topIndex=i,c.find(e.items,function(e,i){if(e.refId===t)return n.subIndex=i,!0})}),n}(e,t);e.items[i.topIndex].items.splice(i.subIndex,1)}}function r(e){return e.replace("#","")}function a(e,t){return!e[r(t)]}function s(e,t){var n=i(e);!function(e){var t=c.get(e,["CUSTOM_MAIN_MENU","items"]);t&&c.some(t,c.partial(a,e))&&(delete e.CUSTOM_MAIN_MENU,delete e.CUSTOM_MENUS)}(e),function(e,t){var n=e.MAIN_MENU;c.forEach(t,function(e){e||o(n,e)}),c.pull(t,"",void 0)}(e,n),function(e,t,n){c.forEach(t,function(t){c.includes(n,t.slice(1))||o(e.MAIN_MENU,t)})}(e,n,t),function(e,t,n){var i=e.MAIN_MENU,o=0===i.items.length;if(e.CUSTOM_MAIN_MENU){if(o)return;delete e.CUSTOM_MAIN_MENU,delete e.CUSTOM_MENUS}c.forEach(n,function(e){if(!c.includes(t,"#"+e)){t.push("#"+e);var n={items:[],refId:"#"+e};i.items.push(n)}})}(e,n,t),function(e,t){e&&e.mainPage&&!c.includes(t,r(e.mainPage))&&(e.mainPage="#"+t[0])}(e.masterPage,t)}var c=n(0);e.exports={exec:function(e,t){var n=e.data.document_data;(function(e){return"Document"===c.get(e,"structure.type")})(e)&&(n.MAIN_MENU=n.MAIN_MENU||{items:[],type:"Menu",id:"MAIN_MENU",metaData:{}},t&&s(n,t))}}},function(e,t,n){"use strict";function i(e,t){return d.map(e,function(e){return function(e,t){var n=f+l++,r=e[c(t.refId)];return e[n]={id:n,label:r.title,isVisible:!r.hidePage,isVisibleMobile:void 0!==r.mobileHidePage?!r.mobileHidePage:!r.hidePage,items:i(t.items,e),link:o(e,t.refId),type:"BasicMenuItem",metaData:{}},"#"+n}(t,e)})}function o(e,t){var n=g+y++;return e[n]={id:n,type:"PageLink",pageId:t,metaData:{}},"#"+n}function r(e,t){return t&&e[c(t)]}function a(e,t){var n=r(e,t.link);return"PageLink"===d.get(n,"type")?n:void 0}function s(e,t){return t.link&&("#CUSTOM_MENU_HEADER"===t.link||function(e,t){var n=a(e,t);return n&&!r(e,n.pageId)}(e,t))}function c(e){return d.replace(e,"#","")}function u(e,t){var n=e.CUSTOM_MAIN_MENU.items,i=d(e).filter({type:"BasicMenuItem"}).map("link").compact().map(c).map(function(t){return e[t]}).map("pageId").compact().map(c).value(),r=d.difference(t,i);d.forEach(r,function(t){var i,r,a,s;e[t].isPopup||n.push((a=f+l++,s=(i=e)[r=t],i[a]={id:a,label:s.title,isVisible:!s.hidePage,isVisibleMobile:void 0!==s.mobileHidePage?!s.mobileHidePage:!s.hidePage,items:[],link:o(i,"#"+r),type:"BasicMenuItem",metaData:{}},"#"+a))})}function p(e,t){var n=d.filter(e,function(e){return e.id&&0===e.id.indexOf(t)}),i=-1;return d.forEach(n,function(e){var n=Number(e.id.replace(t,""));n>i&&(i=n)}),++i}var d=n(0),m=n(74),l=0,y=0,f="bmi",g="pglk";e.exports={exec:function(e,t){if(function(e){return"Page"===d.get(e,"structure.type")}(e))!function(e){d(e.data.document_data).filter({type:"Menu"}).map("id").forEach(function(t){delete e.data.document_data[t]})}(e);else{m.exec(e,t);var n=e.data.document_data;l=p(n,f),y=p(n,g),e.data.document_data.CUSTOM_MAIN_MENU||(e.data.document_data.CUSTOM_MAIN_MENU={id:"CUSTOM_MAIN_MENU",items:i(e.data.document_data.MAIN_MENU.items,e.data.document_data),name:"Custom Main Menu",type:"CustomMenu",metaData:{}}),e.data.document_data.CUSTOM_MENUS?d.includes(e.data.document_data.CUSTOM_MENUS.menus,"#CUSTOM_MAIN_MENU")||e.data.document_data.CUSTOM_MENUS.menus.push("#CUSTOM_MAIN_MENU"):e.data.document_data.CUSTOM_MENUS={id:"CUSTOM_MENUS",menus:["#CUSTOM_MAIN_MENU"],type:"CustomMenusCollection",metaData:{}},u(n,t),n.CUSTOM_MAIN_MENU.items=d.uniq(n.CUSTOM_MAIN_MENU.items),function e(t,n){n.items=d.filter(n.items,function(e){return!d.isUndefined(r(t,e))}),d.forEach(n.items,function(n){var i=r(t,n);s(t,i)&&function(e){delete e.link}(i),e(t,i)})}(n,n.CUSTOM_MAIN_MENU),e.data.document_data.MAIN_MENU.items.length>0&&(e.data.document_data.MAIN_MENU.items=[]);var o=e.data.document_data.CUSTOM_MAIN_MENU;(function(e,t){function n(n){var i,o,s=e.data.document_data,u=r(s,n);return!u.link||!a(s,u)||(i=r(s,u.link),o=d.get(i,"pageId"),d.includes(t,c(o)))}return{removeInvalidSubMenues:function t(i){i.items=d.filter(i.items,n),d(i.items).map(function(t){return r(e.data.document_data,t)}).forEach(t)}}})(e,t).removeInvalidSubMenues(o)}}}},function(e,t,n){"use strict";var i=n(0);e.exports=function e(t,n){i.forEach(t,function(t){i.forEach(n,function(e){e(t)}),t.components&&e(t.components,n)})}},function(e,t,n){"use strict";function i(e){return 0===p.get(e,"layout.width")}function o(e){return 0===p.get(e,"layout.height")}function r(e){i(e)&&p.set(e,"layout.width",100),o(e)&&p.set(e,"layout.height",100)}function a(e,t){var n=!1;if(p.forEach(["SITE_HEADER","SITE_FOOTER"],function(r){var a=p.find(e,{id:r});i(a)&&(n=!0),o(a)&&(p.set(a,"layout.height",100),n=!0),p.set(a,"layout.width",t)}),n){var a=p.reject(e,{id:"PAGES_CONTAINER"});d(a,[r])}}function s(e,t,n){var i=p.find(e,{id:"SITE_HEADER"});if(i){n?function(e,t){if(!t.behaviorQuery)return!1;var n=p.get(e,["data","behaviors_data",t.behaviorQuery]);try{var i=JSON.parse(n.items);return p.some(i,{type:"scrub",name:"ScrubAnimation"})}catch(e){return!1}}(t,i)&&p.set(i,["layout","fixedPosition"],!0):p.set(i,["layout","fixedPosition"],!1);var o=p.find(e,{id:"SITE_FOOTER"});p.set(o,["layout","fixedPosition"],!1)}}function c(e,t){var n,i=e.structure,o=i.children,r=i.mobileComponents,c=p.get(e,"data.document_data.masterPage.renderModifiers.siteWidth",980);u(o),a(o,c),u(r),a(r,320),s(r,e,t),n=r,p.forEach(n,function(e){p.forEach(p.get(e,"layout.anchors"),function(t){switch(e.id){case"SITE_FOOTER":"BOTTOM_PARENT"===t.type&&(t.distance=0);break;case"PAGES_CONTAINER":"BOTTOM_TOP"===t.type&&t.locked&&t.distance>=70&&(t.originalValue=0,t.locked=!1)}})})}function u(e){p.forEach(m,function(t){if(!p.find(e,{id:t.id})){var n=p.find(e,{componentType:t.componentType});n&&(n.id=t.id)}})}var p=n(0),d=n(76),m=[{componentType:"wysiwyg.viewer.components.PagesContainer",id:"PAGES_CONTAINER"},{componentType:"wysiwyg.viewer.components.FooterContainer",id:"SITE_FOOTER"},{componentType:"wysiwyg.viewer.components.HeaderContainer",id:"SITE_HEADER"}];e.exports={exec:function(e,t,n,i,o,r,a,s){var u;return e.structure&&"Document"===e.structure.type&&(e.structure.id="masterPage",e.structure.componentType="mobile.core.components.MasterPage",(u=e.data.document_data).SITE_STRUCTURE&&(u.masterPage=u.SITE_STRUCTURE),u.masterPage||(u.masterPage={}),u.masterPage.id="masterPage",delete u.SITE_STRUCTURE,c(e,s.isExperimentOpen("sv_fixedMobileHeader"))),e}}},function(e,t,n){"use strict";e.exports={exec:function(e){e.structure=e.structure||{},e.structure.layout=e.structure.layout||{},e.structure.layout.y=0}}},function(e,t,n){"use strict";e.exports={"wysiwyg.viewer.components.MatrixGallery":{propType:"MatrixGalleryProperties"},"wysiwyg.viewer.components.PaginatedGridGallery":{propType:"PaginatedGridGalleryProperties"},"wysiwyg.viewer.components.SliderGallery":{propType:"SliderGalleryProperties"},"wysiwyg.viewer.components.SlideShowGallery":{propType:"SlideShowGalleryProperties"},"tpa.viewer.components.Masonry":{propType:"MasonryProperties"},"tpa.viewer.components.Accordion":{propType:"AccordionProperties"},"tpa.viewer.components.Impress":{propType:"ImpressProperties"},"tpa.viewer.components.Freestyle":{propType:"FreestyleProperties"},"tpa.viewer.components.Collage":{propType:"CollageProperties"},"tpa.viewer.components.Honeycomb":{propType:"HoneycombProperties"},"tpa.viewer.components.StripShowcase":{propType:"StripShowcaseProperties"},"tpa.viewer.components.StripSlideshow":{propType:"StripSlideshowProperties"},"tpa.viewer.components.Thumbnails":{propType:"ThumbnailsProperties"},"wysiwyg.viewer.components.tpapps.TPA3DGallery":{propType:"SlideShowGalleryProperties"},"wysiwyg.viewer.components.tpapps.TPA3DCarousel":{propType:"SlideShowGalleryProperties"}}},function(e,t,n){"use strict";function i(e,t,n,i){if(n){var o=t[i.id];if(o.componentType!==i.componentType){var r=o.componentType;i.componentType=r;var s=this.getComponentProperties(e,i),c=a[r].propType;!r||s&&s.type===c||(i.propertyQuery=o.propertyQuery)}}else t[i.id]=i}var o=n(0),r=n(2),a=n(79);e.exports={exec:function(e){var t=o.mapValues(a,function(){return i});new r(t).migratePage(e)}}},function(e,t,n){"use strict";var i=n(7),o=n(9),r=n(8),a=n(3),s=n(5);e.exports={fix:i,deprecatedSiteModelMigrater:o,fixBackgroundData:r,imageTransformDataFixers:a,anchorCyclesHelper:s}}])});