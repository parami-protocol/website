define("dataFixer/plugins/verticalMenuFixer",["lodash","coreUtils","skinExports"],function(e,t,n){"use strict";function a(t,n){return"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"===n.componentType&&!function(t,n){var a=i(t,n);return!e.isUndefined(a.menuItemHeight)}(t,n)}function i(e,t){return e.data.component_properties[t.propertyQuery.replace("#","")]}function r(a,r){var o,s,l,d,f=(o=a,s=r,o.data.document_data[s.dataQuery.replace("#","")]),p=e.get(f,"menuRef","").replace("#",""),m=c[p],g=(l=a,d=r,l.data.theme_data[d.styleId]||u[d.styleId]);if(g){var b=parseInt(g.style.properties.sepw||g.style.properties.separatorHeight||0,10),F=n[g.skin];!function(e,n,a){var r=i(e,n);a?r.menuItemHeight=a:t.log.error("cannot find menu items")}(a,r,t.verticalMenuCalculations.getItemHeight(r.layout.height,b,m,F))}else t.log.error("cannot find style")}function o(t,n){e.forEach(n,function(e){a(t,e)&&r(t,e),e.components&&o(t,e.components)})}function s(e){var t=e.structure;t&&(t.components&&o(e,t.components),t.mobileComponents&&o(e,t.mobileComponents),t.children&&o(e,t.children))}var l=!1,u={},c={},d=[];return{exec:function(t){if(t.data.theme_data.THEME_DATA)for(u=t.data.theme_data,function(t){var n=t.data.document_data,a=n.CUSTOM_MENUS&&n.CUSTOM_MENUS.menus||[];e.forEach(a,function(t){var a=t.replace("#",""),i=n[a]&&n[a].items||[],r=e.filter(i,function(e){return n[e.replace("#","")].isVisible}).length;c[a]=r||1})}(t),s(t),l=!0;d.length>0;)s(d.pop());else l?s(t):d.push(t)}}}),define("dataFixer/plugins/boxSlideShowDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n="BOXSLIDESHOW_Regular_Slideshow_Slides_New_Slide_Label";return{exec:function(a,i,r,o,s,l,u){var c=a.data.document_data;"Template"===e.get(u,"siteInfo.documentType")&&function(a,i){if(e.includes(t.languages,i)){var r=t.translationsLoader.getTranslationAllKeys("boxSlideShow",i,{},{useOldTranslations:!0});r&&e.forOwn(a,function(e){if("boxSlideShowSlide"===e.type||"StripContainerSlideShowSlide"===e.type){var t=e.title?e.title.split(" ")[1]:"";e.title=r[n]&&t?r[n].replace("<%= curr_slide %>",t):e.title}})}}(c,r?t.wixUserApi.getLanguage(r.cookie,o,r.language):"en")}}}),define("dataFixer/plugins/contactFormDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n=["addressFieldLabel","emailFieldLabel","errorMessage","messageFieldLabel","nameFieldLabel","phoneFieldLabel","subjectFieldLabel","submitButtonLabel","successMessage","validationErrorMessage"];return{exec:function(a,i,r,o,s,l,u){var c=a.data.document_data;if("Template"===e.get(u,"siteInfo.documentType")){!function(a,i){if(e.includes(t.languages,i)){var r=t.translationsLoader.getTranslationAllKeys("contactFormTranslations",i,{},{useOldTranslations:!0});r&&e.forOwn(a,function(t){"ContactForm"===t.type&&e.forEach(n,function(e){t[e]=r[e]||t[e]})})}}(c,t.wixUserApi.getLanguage(r.cookie,o,r.language)),d=c,e.forOwn(d,function(e){"ContactForm"===e.type&&(e.onSubmitBehavior||(e.onSubmitBehavior="message"))});var d}}}}),define("dataFixer/plugins/subscribeFormDataFixer",["lodash","coreUtils"],function(e,t){"use strict";var n=["emailFieldLabel","errorMessage","firstNameFieldLabel","lastNameFieldLabel","phoneFieldLabel","submitButtonLabel","subscribeFormTitle","successMessage","validationErrorMessage"];return{exec:function(a,i,r,o,s,l,u){var c=a.data.document_data;if(d=u,"Template"===e.get(d,"siteInfo.documentType")){var d;!function(a,i){if(e.includes(t.languages,i)){var r=t.translationsLoader.getTranslationAllKeys("subscribeFormTranslations",i,{},{useOldTranslations:!0});r&&e.forOwn(a,function(t){"SubscribeForm"===t.type&&e.forEach(n,function(e){t[e]=r[e]||t[e]})})}}(c,t.wixUserApi.getLanguage(r.cookie,o,r.language)),f=c,e.forOwn(f,function(e){"SubscribeForm"===e.type&&(e.onSubmitBehavior||(e.onSubmitBehavior="message"))});var f}}}}),define("dataFixer",["lodash","experiment","santa-data-fixer","dataFixer/plugins/verticalMenuFixer","dataFixer/plugins/boxSlideShowDataFixer","dataFixer/plugins/contactFormDataFixer","dataFixer/plugins/subscribeFormDataFixer"],function(e,t,n,a,i,r,o){"use strict";return e.assign({},n,{fix:function(s,l,u,c,d,f,p){var m=e(e.get(p,"runningExperiments",{})).pickBy(function(e,n){return t.isOpen(n,{rendererModel:p})}).keys().value(),g=e.get(p,"clientSpecMap"),b=e.get(p,"siteMetaData.quickActions.configuration.quickActionsMenuEnabled",!1);return s=n.fix({pageJson:s,clientSpecMap:g,urlFormatModel:d,quickActionsMenuEnabled:b,isViewerMode:f,experiments:m,pageIdsArray:l}),e.forEach([a,i,r,o],function(e){return e.exec(s,l,u,c,d,f,p)}),s}})});