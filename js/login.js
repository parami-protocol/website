function switchLang4Login(n){switchLang(n),$("input[name=username]").attr("placeholder",$.i18n("user_name_warning")),$("input[name=password]").attr("placeholder",$.i18n("pwd_warning"))}function checkUser(n){var e=!0;return""===$("input[name=username]").val()?($("input[name=username] + div.with-errors").html($.i18n("user_name_not_empty")),e=!1):$("input[name=username] + div.with-errors").html(""),e}function checkPwd(n){var e=!0;return""===$("input[name=password]").val()?($("input[name=password] + div.with-errors").html($.i18n("pwd_not_empty")),e=!1):$("input[name=password] + div.with-errors").html(""),e}$(document).ready(function(){alive(function(){window.location.href=HOME_PAGE}),$.i18n({locale:"en"}).load({en:"/i18n/en.json",zh:"/i18n/zh.json"}).then(function(){switchLang4Login(1)}),$("input[name=username]").blur(checkUser),$("input[name=password]").blur(checkPwd);var n=$("form");n.on("submit",function(e){checkUser()&&checkPwd()&&!e.isDefaultPrevented()&&$.ajax({url:LOGIN_URL,method:"POST",data:JSON.stringify(n.serializeJSON()),contentType:"application/json"}).done(function(n,e,t){n.success||n.message&&$(".page-error").text(n.message),Cookies.set("token",n.id_token,{expires:3})}).fail(function(n,e,t){$(".page-error").html($.i18n("login_error"))}).then(function(n){if(n.id_token)return $.ajax({url:KYC_STATUS_URL,headers:{Authorization:"Bearer "+n.id_token}})}).done(function(n,e,t){null===n.data||null!==n.data.kycStatus?window.location.href=KYC_STATUS_PAGE:getUrlParams("redirect")?window.location.href=getUrlParams("redirect"):window.location.href=HOME_PAGE}),e.preventDefault()})});