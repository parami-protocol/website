function switchLang4PwdFinish(n){switchLang(n),$("input[name=password]").attr("placeholder",$.i18n("new_pwd_placeholder")),$("input[name=password2]").attr("placeholder",$.i18n("confirm_pwd_placeholder"))}function checkPwd(n){var e=!0;return/^[\S]{6,16}$/.test($("input[name=password]").val())?$("input[name=password] + div.with-errors").html(""):($("input[name=password] + div.with-errors").html($.i18n("register_name_illegal_character_warning")),e=!1),e}function checkPwd2(n){var e=!0;return $("input[name=password]").val()!=$("input[name=password2]").val()?($("input[name=password2] + div.with-errors").html($.i18n("pwd_different_warning")),e=!1):$("input[name=password2] + div.with-errors").html(""),e}$(document).ready(function(){$.i18n({locale:"en"}).load({en:"/i18n/en.json",zh:"/i18n/zh.json"}).then(function(){switchLang4PwdFinish(1)}),$("input[name=password]").blur(checkPwd),$("input[name=password2]").blur(checkPwd2);var n=$.url(window.location.href),e=n.param("key");$("form").on("submit",function(n){if(checkPwd()&&checkPwd2()&&!n.isDefaultPrevented()){var a=$("input[name=password]").val();e?$.ajax({url:FORGET_PASSOWRD_FINISH_URL,method:"POST",contentType:"application/json",data:JSON.stringify({key:e,newPassword:a})}).done(function(n,e,a){window.location.href=LOGIN_PAGE}).fail(function(n,e,a){$(".page-error").html(a)}):$(".page-error").html($.i18n("empty_key"))}n.preventDefault()})});