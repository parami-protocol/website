!function(n){"use strict";var r=function(r){this.options=n.extend({},n.i18n.parser.defaults,r),this.language=n.i18n.languages[String.locale]||n.i18n.languages.default,this.emitter=n.i18n.parser.emitter};r.prototype={constructor:r,simpleParse:function(n,r){return n.replace(/\$(\d+)/g,function(n,t){var u=parseInt(t,10)-1;return void 0!==r[u]?r[u]:"$"+t})},parse:function(r,t){return r.indexOf("{{")<0?this.simpleParse(r,t):(this.emitter.language=n.i18n.languages[n.i18n().locale]||n.i18n.languages.default,this.emitter.emit(this.ast(r),t))},ast:function(n){function r(n){return function(){var r,t;for(r=0;r<n.length;r++)if(null!==(t=n[r]()))return t;return null}}function t(n){var r,t,u=T,l=[];for(r=0;r<n.length;r++){if(null===(t=n[r]()))return T=u,null;l.push(t)}return l}function u(n,r){return function(){for(var t=T,u=[],l=r();null!==l;)u.push(l),l=r();return u.length<n?(T=t,null):u}}function l(r){var t=r.length;return function(){var u=null;return n.slice(T,T+t)===r&&(u=r,T+=t),u}}function e(r){return function(){var t=n.slice(T).match(r);return null===t?null:(T+=t[0].length,t[0])}}function i(){var n=u(1,j)();return null===n?null:n.join("")}function a(){var n=u(1,w)();return null===n?null:n.join("")}function o(){var n=t([d,m]);return null===n?null:n[1]}function c(){var n=t([$,x]);return null===n?null:["REPLACE",parseInt(n[1],10)-1]}function f(){var n,r=t([h,u(0,I)]);return null===r?null:(n=r[1],n.length>1?["CONCAT"].concat(n):n[0])}function s(){var n=t([O,p,c]);return null===n?null:[n[0],n[2]]}function g(){var n=t([O,p,I]);return null===n?null:[n[0],n[2]]}function v(){var n=t([S,E,y]);return null===n?null:n[1]}var h,p,d,m,$,x,C,A,P,j,w,E,O,S,y,F,I,N,T=0;if(h=l("|"),p=l(":"),d=l("\\"),m=e(/^./),$=l("$"),x=e(/^\d+/),C=e(/^[^{}\[\]$\\]/),A=e(/^[^{}\[\]$\\|]/),P=e(/^[^{}\[\]$\s]/),r([o,P]),j=r([o,A]),w=r([o,C]),O=function(n,r){return function(){var t=n();return null===t?null:r(t)}}(e(/^[ !"$&'()*,.\/0-9;=?@A-Z\^_`a-z~\x80-\xFF+\-]+/),function(n){return n.toString()}),E=r([function(){var n=t([r([s,g]),u(0,f)]);return null===n?null:n[0].concat(n[1])},function(){var n=t([O,u(0,f)]);return null===n?null:[n[0]].concat(n[1])}]),S=l("{{"),y=l("}}"),F=r([v,c,a]),I=r([v,c,i]),null===(N=function(){var n=u(0,F)();return null===n?null:["CONCAT"].concat(n)}())||T!==n.length)throw new Error("Parse error at position "+T.toString()+" in input: "+n);return N}},n.extend(n.i18n.parser,new r)}(jQuery);